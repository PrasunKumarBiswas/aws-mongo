{"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nvar _userRouter = _interopRequireDefault(require(\"./routers/userRouter\"));\nvar _orderRouter = _interopRequireDefault(require(\"./routers/orderRouter\"));\nvar _productRouter = _interopRequireDefault(require(\"./routers/productRouter\"));\nvar _uploadRouter = _interopRequireDefault(require(\"./routers/uploadRouter\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_mongoose.default.connect(_config.default.MONGODB_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n  useCreateIndex: true\n}).then(() => {\n  console.log('Connected to mongodb.');\n}).catch(error => {\n  console.log(error.reason);\n});\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_bodyParser.default.json());\napp.use('/api/uploads', _uploadRouter.default);\napp.use('/api/users', _userRouter.default);\napp.use('/api/products', _productRouter.default);\napp.use('/api/orders', _orderRouter.default);\napp.get('/api/paypal/clientId', (req, res) => {\n  res.send({\n    clientId: _config.default.PAYPAL_CLIENT_ID\n  });\n});\napp.use('/uploads', _express.default.static(_path.default.join(__dirname, '/../uploads')));\napp.use(_express.default.static(_path.default.join(__dirname, '/../frontend')));\napp.get('*', (req, res) => {\n  res.sendFile(_path.default.join(__dirname, '/../frontend/index.html'));\n});\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === 'ValidationError' ? 400 : 500;\n  res.status(status).send({\n    message: err.message\n  });\n});\napp.listen(_config.default.PORT, () => {\n  console.log('serve at http://localhost:5000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3QiLCJjb25maWciLCJNT05HT0RCX1VSTCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInVzZUNyZWF0ZUluZGV4IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIiwicmVhc29uIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImNvcnMiLCJib2R5UGFyc2VyIiwianNvbiIsInVwbG9hZFJvdXRlciIsInVzZXJSb3V0ZXIiLCJwcm9kdWN0Um91dGVyIiwib3JkZXJSb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwiY2xpZW50SWQiLCJQQVlQQUxfQ0xJRU5UX0lEIiwic3RhdGljIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJzZW5kRmlsZSIsImVyciIsIm5leHQiLCJzdGF0dXMiLCJuYW1lIiwibWVzc2FnZSIsImxpc3RlbiIsIlBPUlQiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XHJcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgdXNlclJvdXRlciBmcm9tICcuL3JvdXRlcnMvdXNlclJvdXRlcic7XHJcbmltcG9ydCBvcmRlclJvdXRlciBmcm9tICcuL3JvdXRlcnMvb3JkZXJSb3V0ZXInO1xyXG5pbXBvcnQgcHJvZHVjdFJvdXRlciBmcm9tICcuL3JvdXRlcnMvcHJvZHVjdFJvdXRlcic7XHJcbmltcG9ydCB1cGxvYWRSb3V0ZXIgZnJvbSAnLi9yb3V0ZXJzL3VwbG9hZFJvdXRlcic7XHJcblxyXG5cclxubW9uZ29vc2VcclxuICAuY29ubmVjdChjb25maWcuTU9OR09EQl9VUkwsIHtcclxuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcclxuICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxuICAgIHVzZUNyZWF0ZUluZGV4OiB0cnVlLFxyXG4gIH0pXHJcbiAgLnRoZW4oKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBtb25nb2RiLicpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IucmVhc29uKTtcclxuICB9KTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5hcHAudXNlKGNvcnMoKSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5hcHAudXNlKCcvYXBpL3VwbG9hZHMnLCB1cGxvYWRSb3V0ZXIpO1xyXG5hcHAudXNlKCcvYXBpL3VzZXJzJywgdXNlclJvdXRlcik7XHJcbmFwcC51c2UoJy9hcGkvcHJvZHVjdHMnLCBwcm9kdWN0Um91dGVyKTtcclxuYXBwLnVzZSgnL2FwaS9vcmRlcnMnLCBvcmRlclJvdXRlcik7XHJcbmFwcC5nZXQoJy9hcGkvcGF5cGFsL2NsaWVudElkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnNlbmQoeyBjbGllbnRJZDogY29uZmlnLlBBWVBBTF9DTElFTlRfSUQgfSk7XHJcbn0pO1xyXG5hcHAudXNlKCcvdXBsb2FkcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvLi4vdXBsb2FkcycpKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9mcm9udGVuZCcpKSk7XHJcbmFwcC5nZXQoJyonLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9mcm9udGVuZC9pbmRleC5odG1sJykpO1xyXG59KTtcclxuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGNvbnN0IHN0YXR1cyA9IGVyci5uYW1lICYmIGVyci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJyA/IDQwMCA6IDUwMDtcclxuICByZXMuc3RhdHVzKHN0YXR1cykuc2VuZCh7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xyXG59KTtcclxuYXBwLmxpc3Rlbihjb25maWcuUE9SVCwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdzZXJ2ZSBhdCBodHRwOi8vbG9jYWxob3N0OjUwMDAnKTtcclxufSk7Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQWtEO0FBR2xEQSxpQkFBUSxDQUNMQyxPQUFPLENBQUNDLGVBQU0sQ0FBQ0MsV0FBVyxFQUFFO0VBQzNCQyxlQUFlLEVBQUUsSUFBSTtFQUNyQkMsa0JBQWtCLEVBQUUsSUFBSTtFQUN4QkMsY0FBYyxFQUFFO0FBQ2xCLENBQUMsQ0FBQyxDQUNEQyxJQUFJLENBQUMsTUFBTTtFQUNWQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQztBQUN0QyxDQUFDLENBQUMsQ0FDREMsS0FBSyxDQUFFQyxLQUFLLElBQUs7RUFDaEJILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxLQUFLLENBQUNDLE1BQU0sQ0FBQztBQUMzQixDQUFDLENBQUM7QUFDSixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRTtBQUNyQkQsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUMsYUFBSSxHQUFFLENBQUM7QUFDZkgsR0FBRyxDQUFDRSxHQUFHLENBQUNFLG1CQUFVLENBQUNDLElBQUksRUFBRSxDQUFDO0FBQzFCTCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxjQUFjLEVBQUVJLHFCQUFZLENBQUM7QUFDckNOLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFlBQVksRUFBRUssbUJBQVUsQ0FBQztBQUNqQ1AsR0FBRyxDQUFDRSxHQUFHLENBQUMsZUFBZSxFQUFFTSxzQkFBYSxDQUFDO0FBQ3ZDUixHQUFHLENBQUNFLEdBQUcsQ0FBQyxhQUFhLEVBQUVPLG9CQUFXLENBQUM7QUFDbkNULEdBQUcsQ0FBQ1UsR0FBRyxDQUFDLHNCQUFzQixFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzVDQSxHQUFHLENBQUNDLElBQUksQ0FBQztJQUFFQyxRQUFRLEVBQUV6QixlQUFNLENBQUMwQjtFQUFpQixDQUFDLENBQUM7QUFDakQsQ0FBQyxDQUFDO0FBQ0ZmLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFVBQVUsRUFBRUQsZ0JBQU8sQ0FBQ2UsTUFBTSxDQUFDQyxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUM7QUFDeEVuQixHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ2UsTUFBTSxDQUFDQyxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDN0RuQixHQUFHLENBQUNVLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekJBLEdBQUcsQ0FBQ1EsUUFBUSxDQUFDSCxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDL0QsQ0FBQyxDQUFDO0FBQ0ZuQixHQUFHLENBQUNFLEdBQUcsQ0FBQyxDQUFDbUIsR0FBRyxFQUFFVixHQUFHLEVBQUVDLEdBQUcsRUFBRVUsSUFBSSxLQUFLO0VBQy9CLE1BQU1DLE1BQU0sR0FBR0YsR0FBRyxDQUFDRyxJQUFJLElBQUlILEdBQUcsQ0FBQ0csSUFBSSxLQUFLLGlCQUFpQixHQUFHLEdBQUcsR0FBRyxHQUFHO0VBQ3JFWixHQUFHLENBQUNXLE1BQU0sQ0FBQ0EsTUFBTSxDQUFDLENBQUNWLElBQUksQ0FBQztJQUFFWSxPQUFPLEVBQUVKLEdBQUcsQ0FBQ0k7RUFBUSxDQUFDLENBQUM7QUFDbkQsQ0FBQyxDQUFDO0FBQ0Z6QixHQUFHLENBQUMwQixNQUFNLENBQUNyQyxlQUFNLENBQUNzQyxJQUFJLEVBQUUsTUFBTTtFQUM1QmhDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO0FBQy9DLENBQUMsQ0FBQyJ9","map":{"version":3,"names":["mongoose","connect","config","MONGODB_URL","useNewUrlParser","useUnifiedTopology","useCreateIndex","then","console","log","catch","error","reason","app","express","use","cors","bodyParser","json","uploadRouter","userRouter","productRouter","orderRouter","get","req","res","send","clientId","PAYPAL_CLIENT_ID","static","path","join","__dirname","sendFile","err","next","status","name","message","listen","PORT"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\","sources":["server.js"],"sourcesContent":["import express from 'express';\r\nimport cors from 'cors';\r\nimport mongoose from 'mongoose';\r\nimport bodyParser from 'body-parser';\r\nimport path from 'path';\r\nimport config from './config';\r\nimport userRouter from './routers/userRouter';\r\nimport orderRouter from './routers/orderRouter';\r\nimport productRouter from './routers/productRouter';\r\nimport uploadRouter from './routers/uploadRouter';\r\n\r\n\r\nmongoose\r\n  .connect(config.MONGODB_URL, {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n    useCreateIndex: true,\r\n  })\r\n  .then(() => {\r\n    console.log('Connected to mongodb.');\r\n  })\r\n  .catch((error) => {\r\n    console.log(error.reason);\r\n  });\r\nconst app = express();\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\napp.use('/api/uploads', uploadRouter);\r\napp.use('/api/users', userRouter);\r\napp.use('/api/products', productRouter);\r\napp.use('/api/orders', orderRouter);\r\napp.get('/api/paypal/clientId', (req, res) => {\r\n  res.send({ clientId: config.PAYPAL_CLIENT_ID });\r\n});\r\napp.use('/uploads', express.static(path.join(__dirname, '/../uploads')));\r\napp.use(express.static(path.join(__dirname, '/../frontend')));\r\napp.get('*', (req, res) => {\r\n  res.sendFile(path.join(__dirname, '/../frontend/index.html'));\r\n});\r\napp.use((err, req, res, next) => {\r\n  const status = err.name && err.name === 'ValidationError' ? 400 : 500;\r\n  res.status(status).send({ message: err.message });\r\n});\r\napp.listen(config.PORT, () => {\r\n  console.log('serve at http://localhost:5000');\r\n});"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAkD;AAGlDA,iBAAQ,CACLC,OAAO,CAACC,eAAM,CAACC,WAAW,EAAE;EAC3BC,eAAe,EAAE,IAAI;EACrBC,kBAAkB,EAAE,IAAI;EACxBC,cAAc,EAAE;AAClB,CAAC,CAAC,CACDC,IAAI,CAAC,MAAM;EACVC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;AACtC,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;EAChBH,OAAO,CAACC,GAAG,CAACE,KAAK,CAACC,MAAM,CAAC;AAC3B,CAAC,CAAC;AACJ,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AACrBD,GAAG,CAACE,GAAG,CAAC,IAAAC,aAAI,GAAE,CAAC;AACfH,GAAG,CAACE,GAAG,CAACE,mBAAU,CAACC,IAAI,EAAE,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEI,qBAAY,CAAC;AACrCN,GAAG,CAACE,GAAG,CAAC,YAAY,EAAEK,mBAAU,CAAC;AACjCP,GAAG,CAACE,GAAG,CAAC,eAAe,EAAEM,sBAAa,CAAC;AACvCR,GAAG,CAACE,GAAG,CAAC,aAAa,EAAEO,oBAAW,CAAC;AACnCT,GAAG,CAACU,GAAG,CAAC,sBAAsB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC5CA,GAAG,CAACC,IAAI,CAAC;IAAEC,QAAQ,EAAEzB,eAAM,CAAC0B;EAAiB,CAAC,CAAC;AACjD,CAAC,CAAC;AACFf,GAAG,CAACE,GAAG,CAAC,UAAU,EAAED,gBAAO,CAACe,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,aAAa,CAAC,CAAC,CAAC;AACxEnB,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACe,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC;AAC7DnB,GAAG,CAACU,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBA,GAAG,CAACQ,QAAQ,CAACH,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,yBAAyB,CAAC,CAAC;AAC/D,CAAC,CAAC;AACFnB,GAAG,CAACE,GAAG,CAAC,CAACmB,GAAG,EAAEV,GAAG,EAAEC,GAAG,EAAEU,IAAI,KAAK;EAC/B,MAAMC,MAAM,GAAGF,GAAG,CAACG,IAAI,IAAIH,GAAG,CAACG,IAAI,KAAK,iBAAiB,GAAG,GAAG,GAAG,GAAG;EACrEZ,GAAG,CAACW,MAAM,CAACA,MAAM,CAAC,CAACV,IAAI,CAAC;IAAEY,OAAO,EAAEJ,GAAG,CAACI;EAAQ,CAAC,CAAC;AACnD,CAAC,CAAC;AACFzB,GAAG,CAAC0B,MAAM,CAACrC,eAAM,CAACsC,IAAI,EAAE,MAAM;EAC5BhC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;AAC/C,CAAC,CAAC"}},"mtime":1671374922971},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nvar _default = {\n  PORT: process.env.PORT || 5000,\n  MONGODB_URL: process.env.MONGODB_URL,\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJQT1JUIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJMIiwiSldUX1NFQ1JFVCIsIlBBWVBBTF9DTElFTlRfSUQiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgUE9SVDogcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwLFxyXG4gIE1PTkdPREJfVVJMOiBwcm9jZXNzLmVudi5NT05HT0RCX1VSTCxcclxuICBKV1RfU0VDUkVUOiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxyXG4gIFBBWVBBTF9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQsXHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE0QjtBQUU1QkEsZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFBQyxlQUVEO0VBQ2JDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLElBQUksSUFBSSxJQUFJO0VBQzlCRyxXQUFXLEVBQUVGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0VBQ3BDQyxVQUFVLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxVQUFVO0VBQ2xDQyxnQkFBZ0IsRUFBRUosT0FBTyxDQUFDQyxHQUFHLENBQUNHO0FBQ2hDLENBQUM7QUFBQSJ9","map":{"version":3,"names":["dotenv","config","PORT","process","env","MONGODB_URL","JWT_SECRET","PAYPAL_CLIENT_ID"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport default {\r\n  PORT: process.env.PORT || 5000,\r\n  MONGODB_URL: process.env.MONGODB_URL,\r\n  JWT_SECRET: process.env.JWT_SECRET,\r\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID,\r\n};"],"mappings":";;;;;;AAAA;AAA4B;AAE5BA,eAAM,CAACC,MAAM,EAAE;AAAC,eAED;EACbC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;EAC9BG,WAAW,EAAEF,OAAO,CAACC,GAAG,CAACC,WAAW;EACpCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACE,UAAU;EAClCC,gBAAgB,EAAEJ,OAAO,CAACC,GAAG,CAACG;AAChC,CAAC;AAAA"}},"mtime":1671374922971},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const users = await _userModel.default.find({});\n  res.send(users);\n}));\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'ecommerce',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password,\n    phoneno: req.body.phoneno,\n    address: req.body.address\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Invalid User Data'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      phoneno: createdUser.phoneno,\n      address: createdUser.address,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'User Not Found'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    user.phoneno = req.body.phoneno || user.phoneno;\n    user.address = req.body.address || user.address;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      phoneno: updatedUser.phoneno,\n      address: updatedUser.address,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nuserRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (user) {\n    const deletedUser = await user.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedUser\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsImlzQWRtaW4iLCJleHByZXNzQXN5bmNIYW5kbGVyIiwicmVxIiwicmVzIiwidXNlcnMiLCJVc2VyIiwiZmluZCIsInNlbmQiLCJ1c2VyIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJjcmVhdGVkVXNlciIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwiZ2VuZXJhdGVUb2tlbiIsInBob25lbm8iLCJhZGRyZXNzIiwicHV0IiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIiwiZGVsZXRlIiwiZGVsZXRlZFVzZXIiLCJyZW1vdmUiLCJwcm9kdWN0Il0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJ1c2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAnLycsXHJcbiAgaXNBdXRoLFxyXG4gIGlzQWRtaW4sXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KTtcclxuICAgIHJlcy5zZW5kKHVzZXJzKTtcclxuICB9KVxyXG4pO1xyXG51c2VyUm91dGVyLmdldCgnL2NyZWF0ZWFkbWluJywgXHJcbmV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICBwYXNzd29yZDogJ2Vjb21tZXJjZScsXHJcbiAgICAgIGlzQWRtaW46IHRydWUsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICByZXMuc2VuZChjcmVhdGVkVXNlcik7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufSlcclxuKTtcclxudXNlclJvdXRlci5wb3N0KFxyXG4gICcvc2lnbmluJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2lnbmluVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XHJcbiAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXNpZ25pblVzZXIpIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJyxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBzaWduaW5Vc2VyLm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsXHJcbiAgICAgICAgaXNBZG1pbjogc2lnbmluVXNlci5pc0FkbWluLFxyXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKHNpZ25pblVzZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG51c2VyUm91dGVyLnBvc3QoXHJcbiAgJy9yZWdpc3RlcicsXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgIG5hbWU6IHJlcS5ib2R5Lm5hbWUsXHJcbiAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxyXG4gICAgICBwaG9uZW5vOiByZXEuYm9keS5waG9uZW5vLFxyXG4gICAgICBhZGRyZXNzOiByZXEuYm9keS5hZGRyZXNzLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xyXG4gICAgaWYgKCFjcmVhdGVkVXNlcikge1xyXG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgVXNlciBEYXRhJyxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogY3JlYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsXHJcbiAgICAgICAgcGhvbmVubzogY3JlYXRlZFVzZXIucGhvbmVubyxcclxuICAgICAgICBhZGRyZXNzOiBjcmVhdGVkVXNlci5hZGRyZXNzLFxyXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG51c2VyUm91dGVyLnB1dChcclxuICAnLzppZCcsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIE5vdCBGb3VuZCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXNlci5uYW1lID0gcmVxLmJvZHkubmFtZSB8fCB1c2VyLm5hbWU7XHJcbiAgICAgIHVzZXIuZW1haWwgPSByZXEuYm9keS5lbWFpbCB8fCB1c2VyLmVtYWlsO1xyXG4gICAgICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQgfHwgdXNlci5wYXNzd29yZDtcclxuICAgICAgdXNlci5waG9uZW5vID0gcmVxLmJvZHkucGhvbmVubyB8fCB1c2VyLnBob25lbm87XHJcbiAgICAgIHVzZXIuYWRkcmVzcyA9IHJlcS5ib2R5LmFkZHJlc3MgfHwgdXNlci5hZGRyZXNzO1xyXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xyXG4gICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgX2lkOiB1cGRhdGVkVXNlci5faWQsXHJcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsXHJcbiAgICAgICAgcGhvbmVubzogdXBkYXRlZFVzZXIucGhvbmVubyxcclxuICAgICAgICBhZGRyZXNzOiB1cGRhdGVkVXNlci5hZGRyZXNzLFxyXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4odXBkYXRlZFVzZXIpLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG51c2VyUm91dGVyLmRlbGV0ZShcclxuICAnLzppZCcsXHJcbiAgaXNBdXRoLFxyXG4gIGlzQWRtaW4sXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgY29uc3QgZGVsZXRlZFVzZXIgPSBhd2FpdCB1c2VyLnJlbW92ZSgpO1xyXG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFVzZXIgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbmV4cG9ydCBkZWZhdWx0IHVzZXJSb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUEwRDtBQUUxRCxNQUFNQSxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVuQ0YsVUFBVSxDQUFDRyxHQUFHLENBQ1osR0FBRyxFQUNIQyxhQUFNLEVBQ05DLGNBQU8sRUFDUCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxLQUFLLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2pDSCxHQUFHLENBQUNJLElBQUksQ0FBQ0gsS0FBSyxDQUFDO0FBQ2pCLENBQUMsQ0FBQyxDQUNIO0FBQ0RULFVBQVUsQ0FBQ0csR0FBRyxDQUFDLGNBQWMsRUFDN0IsSUFBQUcsNEJBQW1CLEVBQUMsT0FBT0MsR0FBRyxF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","map":{"version":3,"names":["userRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","users","User","find","send","user","name","email","password","createdUser","save","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","phoneno","address","put","findById","params","id","updatedUser","delete","deletedUser","remove","product"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth, isAdmin } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const users = await User.find({});\r\n    res.send(users);\r\n  })\r\n);\r\nuserRouter.get('/createadmin', \r\nexpressAsyncHandler(async (req, res) => {\r\n  try {\r\n    const user = new User({\r\n      name: 'admin',\r\n      email: 'admin@example.com',\r\n      password: 'ecommerce',\r\n      isAdmin: true,\r\n    });\r\n    const createdUser = await user.save();\r\n    res.send(createdUser);\r\n  } catch (err) {\r\n    res.status(500).send({ message: err.message });\r\n  }\r\n})\r\n);\r\nuserRouter.post(\r\n  '/signin',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const signinUser = await User.findOne({\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n    });\r\n    if (!signinUser) {\r\n      res.status(401).send({\r\n        message: 'Invalid Email or Password',\r\n      });\r\n    } else {\r\n      res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email,\r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.post(\r\n  '/register',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = new User({\r\n      name: req.body.name,\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n      phoneno: req.body.phoneno,\r\n      address: req.body.address,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser) {\r\n      res.status(401).send({\r\n        message: 'Invalid User Data',\r\n      });\r\n    } else {\r\n      res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email,\r\n        phoneno: createdUser.phoneno,\r\n        address: createdUser.address,\r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.put(\r\n  '/:id',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n\r\n    if (!user) {\r\n      res.status(404).send({\r\n        message: 'User Not Found',\r\n      });\r\n    } else {\r\n      user.name = req.body.name || user.name;\r\n      user.email = req.body.email || user.email;\r\n      user.password = req.body.password || user.password;\r\n      user.phoneno = req.body.phoneno || user.phoneno;\r\n      user.address = req.body.address || user.address;\r\n      const updatedUser = await user.save();\r\n      res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email,\r\n        phoneno: updatedUser.phoneno,\r\n        address: updatedUser.address,\r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (user) {\r\n      const deletedUser = await user.remove();\r\n      res.send({ message: 'Order Deleted', product: deletedUser });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\nexport default userRouter;"],"mappings":"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"}},"mtime":1670908865589},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  phoneno: {\n    type: Number,\n    required: true\n  },\n  address: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwicGhvbmVubyIsIk51bWJlciIsImFkZHJlc3MiLCJpc0FkbWluIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJVc2VyIiwibW9kZWwiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsidXNlck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZW1haWw6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgaW5kZXg6IHRydWUsXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgfSxcclxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcGhvbmVubzogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOnRydWV9LFxyXG4gIGFkZHJlc3M6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgaXNBZG1pbjogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBZ0M7QUFFaEMsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUNyQ0MsSUFBSSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDQyxLQUFLLEVBQUU7SUFDTEgsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RFLEtBQUssRUFBRSxJQUFJO0lBQ1hDLE1BQU0sRUFBRTtFQUNWLENBQUM7RUFDREMsUUFBUSxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDSyxPQUFPLEVBQUU7SUFBRVAsSUFBSSxFQUFFUSxNQUFNO0lBQUVOLFFBQVEsRUFBQztFQUFJLENBQUM7RUFDdkNPLE9BQU8sRUFBRTtJQUFFVCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUksQ0FBQztFQUN4Q1EsT0FBTyxFQUFFO0lBQUVWLElBQUksRUFBRVcsT0FBTztJQUFFVCxRQUFRLEVBQUUsSUFBSTtJQUFFVSxPQUFPLEVBQUU7RUFBTTtBQUMzRCxDQUFDLENBQUM7QUFDRixNQUFNQyxJQUFJLEdBQUdoQixpQkFBUSxDQUFDaUIsS0FBSyxDQUFDLE1BQU0sRUFBRWxCLFVBQVUsQ0FBQztBQUFDLGVBQ2pDaUIsSUFBSTtBQUFBIn0=","map":{"version":3,"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","phoneno","Number","address","isAdmin","Boolean","default","User","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["userModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  name: { type: String, required: true },\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n    index: true,\r\n    unique: true,\r\n  },\r\n  password: { type: String, required: true },\r\n  phoneno: { type: Number, required:true},\r\n  address: { type: String, required: true},\r\n  isAdmin: { type: Boolean, required: true, default: false },\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdE,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,OAAO,EAAE;IAAEP,IAAI,EAAEQ,MAAM;IAAEN,QAAQ,EAAC;EAAI,CAAC;EACvCO,OAAO,EAAE;IAAET,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAI,CAAC;EACxCQ,OAAO,EAAE;IAAEV,IAAI,EAAEW,OAAO;IAAET,QAAQ,EAAE,IAAI;IAAEU,OAAO,EAAE;EAAM;AAC3D,CAAC,CAAC;AACF,MAAMC,IAAI,GAAGhB,iBAAQ,CAACiB,KAAK,CAAC,MAAM,EAAElB,UAAU,CAAC;AAAC,eACjCiB,IAAI;AAAA"}},"mtime":1669320035773},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst generateToken = user => {\n  return _jsonwebtoken.default.sign({\n    _id: user._id,\n    name: user.name,\n    email: user.email,\n    isAdmin: user.isAdmin\n  }, _config.default.JWT_SECRET);\n};\nexports.generateToken = generateToken;\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'Token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    _jsonwebtoken.default.verify(token, _config.default.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'Invalid Token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexports.isAuth = isAuth;\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZVRva2VuIiwidXNlciIsImp3dCIsInNpZ24iLCJfaWQiLCJuYW1lIiwiZW1haWwiLCJpc0FkbWluIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiQzpcXE1FUk4gc3RhY2tcXGUtY29tbWVyY2VcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsidXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+IHtcclxuICByZXR1cm4gand0LnNpZ24oXHJcbiAgICB7XHJcbiAgICAgIF9pZDogdXNlci5faWQsXHJcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNBZG1pbixcclxuICAgIH0sXHJcbiAgICBjb25maWcuSldUX1NFQ1JFVFxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgIGp3dC52ZXJpZnkodG9rZW4sIGNvbmZpZy5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdJbnZhbGlkIFRva2VuJyB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXEudXNlciA9IGRhdGE7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGlmIChyZXEudXNlciAmJiByZXEudXNlci5pc0FkbWluKSB7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCB2YWxpZCBmb3IgYWRtaW4gdXNlcicgfSk7XHJcbiAgfVxyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE4QjtBQUV2QixNQUFNQSxhQUFhLEdBQUlDLElBQUksSUFBSztFQUNyQyxPQUFPQyxxQkFBRyxDQUFDQyxJQUFJLENBQ2I7SUFDRUMsR0FBRyxFQUFFSCxJQUFJLENBQUNHLEdBQUc7SUFDYkMsSUFBSSxFQUFFSixJQUFJLENBQUNJLElBQUk7SUFDZkMsS0FBSyxFQUFFTCxJQUFJLENBQUNLLEtBQUs7SUFDakJDLE9BQU8sRUFBRU4sSUFBSSxDQUFDTTtFQUNoQixDQUFDLEVBQ0RDLGVBQU0sQ0FBQ0MsVUFBVSxDQUNsQjtBQUNILENBQUM7QUFBQztBQUVLLE1BQU1DLE1BQU0sR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3hDLE1BQU1DLFdBQVcsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWE7RUFDN0MsSUFBSSxDQUFDRixXQUFXLEVBQUU7SUFDaEJGLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUM1RCxDQUFDLE1BQU07SUFDTCxNQUFNQyxLQUFLLEdBQUdOLFdBQVcsQ0FBQ08sS0FBSyxDQUFDLENBQUMsRUFBRVAsV0FBVyxDQUFDUSxNQUFNLENBQUM7SUFDdERwQixxQkFBRyxDQUFDcUIsTUFBTSxDQUFDSCxLQUFLLEVBQUVaLGVBQU0sQ0FBQ0MsVUFBVSxFQUFFLENBQUNlLEdBQUcsRUFBRUMsSUFBSSxLQUFLO01BQ2xELElBQUlELEdBQUcsRUFBRTtRQUNQWixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVDLE9BQU8sRUFBRTtRQUFnQixDQUFDLENBQUM7TUFDcEQsQ0FBQyxNQUFNO1FBQ0xSLEdBQUcsQ0FBQ1YsSUFBSSxHQUFHd0IsSUFBSTtRQUNmWixJQUFJLEVBQUU7TUFDUjtJQUNGLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUFDO0FBRUssTUFBTU4sT0FBTyxHQUFHLENBQUNJLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDekMsSUFBSUYsR0FBRyxDQUFDVixJQUFJLElBQUlVLEdBQUcsQ0FBQ1YsSUFBSSxDQUFDTSxPQUFPLEVBQUU7SUFDaENNLElBQUksRUFBRTtFQUNSLENBQUMsTUFBTTtJQUNMRCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFvQyxDQUFDLENBQUM7RUFDeEU7QUFDRixDQUFDO0FBQUMifQ==","map":{"version":3,"names":["generateToken","user","jwt","sign","_id","name","email","isAdmin","config","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\","sources":["utils.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport config from './config';\r\n\r\nexport const generateToken = (user) => {\r\n  return jwt.sign(\r\n    {\r\n      _id: user._id,\r\n      name: user.name,\r\n      email: user.email,\r\n      isAdmin: user.isAdmin,\r\n    },\r\n    config.JWT_SECRET\r\n  );\r\n};\r\n\r\nexport const isAuth = (req, res, next) => {\r\n  const bearerToken = req.headers.authorization;\r\n  if (!bearerToken) {\r\n    res.status(401).send({ message: 'Token is not supplied' });\r\n  } else {\r\n    const token = bearerToken.slice(7, bearerToken.length);\r\n    jwt.verify(token, config.JWT_SECRET, (err, data) => {\r\n      if (err) {\r\n        res.status(401).send({ message: 'Invalid Token' });\r\n      } else {\r\n        req.user = data;\r\n        next();\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport const isAdmin = (req, res, next) => {\r\n  if (req.user && req.user.isAdmin) {\r\n    next();\r\n  } else {\r\n    res.status(401).send({ message: 'Token is not valid for admin user' });\r\n  }\r\n};"],"mappings":";;;;;;AAAA;AACA;AAA8B;AAEvB,MAAMA,aAAa,GAAIC,IAAI,IAAK;EACrC,OAAOC,qBAAG,CAACC,IAAI,CACb;IACEC,GAAG,EAAEH,IAAI,CAACG,GAAG;IACbC,IAAI,EAAEJ,IAAI,CAACI,IAAI;IACfC,KAAK,EAAEL,IAAI,CAACK,KAAK;IACjBC,OAAO,EAAEN,IAAI,CAACM;EAChB,CAAC,EACDC,eAAM,CAACC,UAAU,CAClB;AACH,CAAC;AAAC;AAEK,MAAMC,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxC,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC7C,IAAI,CAACF,WAAW,EAAE;IAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMC,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC,EAAEP,WAAW,CAACQ,MAAM,CAAC;IACtDpB,qBAAG,CAACqB,MAAM,CAACH,KAAK,EAAEZ,eAAM,CAACC,UAAU,EAAE,CAACe,GAAG,EAAEC,IAAI,KAAK;MAClD,IAAID,GAAG,EAAE;QACPZ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAgB,CAAC,CAAC;MACpD,CAAC,MAAM;QACLR,GAAG,CAACV,IAAI,GAAGwB,IAAI;QACfZ,IAAI,EAAE;MACR;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAAC;AAEK,MAAMN,OAAO,GAAG,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACzC,IAAIF,GAAG,CAACV,IAAI,IAAIU,GAAG,CAACV,IAAI,CAACM,OAAO,EAAE;IAChCM,IAAI,EAAE;EACR,CAAC,MAAM;IACLD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoC,CAAC,CAAC;EACxE;AACF,CAAC;AAAC"}},"mtime":1670386327782},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\orderRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderRouter = _express.default.Router();\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New Order Created',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJpc0F1dGgiLCJpc0FkbWluIiwiZXhwcmVzc0FzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiZmluZCIsInBvcHVsYXRlIiwic2VuZCIsInVzZXIiLCJfaWQiLCJvcmRlciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsIm9yZGVySXRlbXMiLCJib2R5Iiwic2hpcHBpbmciLCJwYXltZW50IiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJjcmVhdGVkT3JkZXIiLCJzYXZlIiwiZGVsZXRlIiwiZGVsZXRlZE9yZGVyIiwicmVtb3ZlIiwicHJvZHVjdCIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0Il0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJvcmRlclJvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcclxuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgT3JkZXIgZnJvbSAnLi4vbW9kZWxzL29yZGVyTW9kZWwnO1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICcvJyxcclxuICBpc0F1dGgsXHJcbiAgaXNBZG1pbixcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7fSkucG9wdWxhdGUoJ3VzZXInKTtcclxuICAgIHJlcy5zZW5kKG9yZGVycyk7XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICcvbWluZScsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKHsgdXNlcjogcmVxLnVzZXIuX2lkIH0pO1xyXG4gICAgcmVzLnNlbmQob3JkZXJzKTtcclxuICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChvcmRlcikge1xyXG4gICAgICByZXMuc2VuZChvcmRlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnBvc3QoXHJcbiAgJy8nLFxyXG4gIGlzQXV0aCxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xyXG4gICAgICBvcmRlckl0ZW1zOiByZXEuYm9keS5vcmRlckl0ZW1zLFxyXG4gICAgICB1c2VyOiByZXEudXNlci5faWQsXHJcbiAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcclxuICAgICAgcGF5bWVudDogcmVxLmJvZHkucGF5bWVudCxcclxuICAgICAgaXRlbXNQcmljZTogcmVxLmJvZHkuaXRlbXNQcmljZSxcclxuICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxyXG4gICAgICBzaGlwcGluZ1ByaWNlOiByZXEuYm9keS5zaGlwcGluZ1ByaWNlLFxyXG4gICAgICB0b3RhbFByaWNlOiByZXEuYm9keS50b3RhbFByaWNlLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdOZXcgT3JkZXIgQ3JlYXRlZCcsIG9yZGVyOiBjcmVhdGVkT3JkZXIgfSk7XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIuZGVsZXRlKFxyXG4gICcvOmlkJyxcclxuICBpc0F1dGgsXHJcbiAgaXNBZG1pbixcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChvcmRlcikge1xyXG4gICAgICBjb25zdCBkZWxldGVkT3JkZXIgPSBhd2FpdCBvcmRlci5yZW1vdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsZXRlZCcsIHByb2R1Y3Q6IGRlbGV0ZWRPcmRlciB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucHV0KFxyXG4gICcvOmlkL3BheScsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgIG9yZGVyLmlzUGFpZCA9IHRydWU7XHJcbiAgICAgIG9yZGVyLnBhaWRBdCA9IERhdGUubm93KCk7XHJcbiAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcclxuICAgICAgICBwYXllcklEOiByZXEuYm9keS5wYXllcklELFxyXG4gICAgICAgIHBheW1lbnRJRDogcmVxLmJvZHkucGF5bWVudElELFxyXG4gICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnNhdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgUGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5wdXQoXHJcbiAgJy86aWQvZGVsaXZlcicsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgIG9yZGVyLmlzRGVsaXZlcmVkID0gdHJ1ZTtcclxuICAgICAgb3JkZXIuZGVsaXZlcmVkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIERlbGl2ZXJlZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5leHBvcnQgZGVmYXVsdCBvcmRlclJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQXlDO0FBRXpDLE1BQU1BLFdBQVcsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXBDRixXQUFXLENBQUNHLEdBQUcsQ0FDYixHQUFHLEVBQ0hDLGFBQU0sRUFDTkMsY0FBTyxFQUNQLElBQUFDLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxtQkFBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLE1BQU0sQ0FBQztFQUNwREosR0FBRyxDQUFDSyxJQUFJLENBQUNKLE1BQU0sQ0FBQztBQUNsQixDQUFDLENBQUMsQ0FDSDtBQUNEVCxXQUFXLENBQUNHLEdBQUcsQ0FDYixPQUFPLEVBQ1BDLGFBQU0sRUFDTixJQUFBRSw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsSUFBSSxDQUFDO0lBQUVHLElBQUksRUFBRVAsR0FBRyxDQUFDTyxJQUFJLENBQUNDO0VBQUksQ0FBQyxDQUFDO0VBQ3ZEUCxHQUFHLENBQUNLLElBQUksQ0FBQ0osTUFBTSxDQUFDO0FBQ2xCLENBQUMsQ0FBQyxDQUNIO0FBQ0RULFdBQVcsQ0FBQ0csR0FBRyxDQUNiLE1BQU0sRUFDTkMsYUFBTSxFQUNOLElBQUFFLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1RLEtBQUssR0FBRyxNQUFNTixtQkFBSyxDQUFDTyxRQUFRLENBQUNWLEdBQUcsQ0FBQ1csTUFBTSxDQUFDQyxFQUFFLENBQUM7RUFDakQsSUFB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","map":{"version":3,"names":["orderRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","orders","Order","find","populate","send","user","_id","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["orderRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Order from '../models/orderModel';\r\n\r\nconst orderRouter = express.Router();\r\n\r\norderRouter.get(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({}).populate('user');\r\n    res.send(orders);\r\n  })\r\n);\r\norderRouter.get(\r\n  '/mine',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({ user: req.user._id });\r\n    res.send(orders);\r\n  })\r\n);\r\norderRouter.get(\r\n  '/:id',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      res.send(order);\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\norderRouter.post(\r\n  '/',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = new Order({\r\n      orderItems: req.body.orderItems,\r\n      user: req.user._id,\r\n      shipping: req.body.shipping,\r\n      payment: req.body.payment,\r\n      itemsPrice: req.body.itemsPrice,\r\n      taxPrice: req.body.taxPrice,\r\n      shippingPrice: req.body.shippingPrice,\r\n      totalPrice: req.body.totalPrice,\r\n    });\r\n    const createdOrder = await order.save();\r\n    res.status(201).send({ message: 'New Order Created', order: createdOrder });\r\n  })\r\n);\r\norderRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      const deletedOrder = await order.remove();\r\n      res.send({ message: 'Order Deleted', product: deletedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\norderRouter.put(\r\n  '/:id/pay',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      order.isPaid = true;\r\n      order.paidAt = Date.now();\r\n      order.payment.paymentResult = {\r\n        payerID: req.body.payerID,\r\n        paymentID: req.body.paymentID,\r\n        orderID: req.body.orderID,\r\n      };\r\n      const updatedOrder = await order.save();\r\n      res.send({ message: 'Order Paid', order: updatedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found.' });\r\n    }\r\n  })\r\n);\r\norderRouter.put(\r\n  '/:id/deliver',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      order.isDelivered = true;\r\n      order.deliveredAt = Date.now();\r\n      const updatedOrder = await order.save();\r\n      res.send({ message: 'Order Delivered', order: updatedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found.' });\r\n    }\r\n  })\r\n);\r\nexport default orderRouter;"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAAyC;AAEzC,MAAMA,WAAW,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAEpCF,WAAW,CAACG,GAAG,CACb,GAAG,EACHC,aAAM,EACNC,cAAO,EACP,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMC,MAAM,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,MAAM,CAAC;EACpDJ,GAAG,CAACK,IAAI,CAACJ,MAAM,CAAC;AAClB,CAAC,CAAC,CACH;AACDT,WAAW,CAACG,GAAG,CACb,OAAO,EACPC,aAAM,EACN,IAAAE,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMC,MAAM,GAAG,MAAMC,mBAAK,CAACC,IAAI,CAAC;IAAEG,IAAI,EAAEP,GAAG,CAACO,IAAI,CAACC;EAAI,CAAC,CAAC;EACvDP,GAAG,CAACK,IAAI,CAACJ,MAAM,CAAC;AAClB,CAAC,CAAC,CACH;AACDT,WAAW,CAACG,GAAG,CACb,MAAM,EACNC,aAAM,EACN,IAAAE,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMQ,KAAK,GAAG,MAAMN,mBAAK,CAACO,QAAQ,CAACV,GAAG,CAACW,MAAM,CAACC,EAAE,CAAC;EACjD,IAAIH,KAAK,EAAE;IACTR,GAAG,CAACK,IAAI,CAACG,KAAK,CAAC;EACjB,CAAC,MAAM;IACLR,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAAEQ,OAAO,EAAE;IAAkB,CAAC,CAAC;EACtD;AACF,CAAC,CAAC,CACH;AACDrB,WAAW,CAACsB,IAAI,CACd,GAAG,EACHlB,aAAM,EACN,IAAAE,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMQ,KAAK,GAAG,IAAIN,mBAAK,CAAC;IACtBa,UAAU,EAAEhB,GAAG,CAACiB,IAAI,CAACD,UAAU;IAC/BT,IAAI,EAAEP,GAAG,CAACO,IAAI,CAACC,GAAG;IAClBU,QAAQ,EAAElB,GAAG,CAACiB,IAAI,CAACC,QAAQ;IAC3BC,OAAO,EAAEnB,GAAG,CAACiB,IAAI,CAACE,OAAO;IACzBC,UAAU,EAAEpB,GAAG,CAACiB,IAAI,CAACG,UAAU;IAC/BC,QAAQ,EAAErB,GAAG,CAACiB,IAAI,CAACI,QAAQ;IAC3BC,aAAa,EAAEtB,GAAG,CAACiB,IAAI,CAACK,aAAa;IACrCC,UAAU,EAAEvB,GAAG,CAACiB,IAAI,CAACM;EACvB,CAAC,CAAC;EACF,MAAMC,YAAY,GAAG,MAAMf,KAAK,CAACgB,IAAI,EAAE;EACvCxB,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;IAAEQ,OAAO,EAAE,mBAAmB;IAAEL,KAAK,EAAEe;EAAa,CAAC,CAAC;AAC7E,CAAC,CAAC,CACH;AACD/B,WAAW,CAACiC,MAAM,CAChB,MAAM,EACN7B,aAAM,EACNC,cAAO,EACP,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMQ,KAAK,GAAG,MAAMN,mBAAK,CAACO,QAAQ,CAACV,GAAG,CAACW,MAAM,CAACC,EAAE,CAAC;EACjD,IAAIH,KAAK,EAAE;IACT,MAAMkB,YAAY,GAAG,MAAMlB,KAAK,CAACmB,MAAM,EAAE;IACzC3B,GAAG,CAACK,IAAI,CAAC;MAAEQ,OAAO,EAAE,eAAe;MAAEe,OAAO,EAAEF;IAAa,CAAC,CAAC;EAC/D,CAAC,MAAM;IACL1B,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAAEQ,OAAO,EAAE;IAAkB,CAAC,CAAC;EACtD;AACF,CAAC,CAAC,CACH;AACDrB,WAAW,CAACqC,GAAG,CACb,UAAU,EACVjC,aAAM,EACN,IAAAE,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMQ,KAAK,GAAG,MAAMN,mBAAK,CAACO,QAAQ,CAACV,GAAG,CAACW,MAAM,CAACC,EAAE,CAAC;EACjD,IAAIH,KAAK,EAAE;IACTA,KAAK,CAACsB,MAAM,GAAG,IAAI;IACnBtB,KAAK,CAACuB,MAAM,GAAGC,IAAI,CAACC,GAAG,EAAE;IACzBzB,KAAK,CAACU,OAAO,CAACgB,aAAa,GAAG;MAC5BC,OAAO,EAAEpC,GAAG,CAACiB,IAAI,CAACmB,OAAO;MACzBC,SAAS,EAAErC,GAAG,CAACiB,IAAI,CAACoB,SAAS;MAC7BC,OAAO,EAAEtC,GAAG,CAACiB,IAAI,CAACqB;IACpB,CAAC;IACD,MAAMC,YAAY,GAAG,MAAM9B,KAAK,CAACgB,IAAI,EAAE;IACvCxB,GAAG,CAACK,IAAI,CAAC;MAAEQ,OAAO,EAAE,YAAY;MAAEL,KAAK,EAAE8B;IAAa,CAAC,CAAC;EAC1D,CAAC,MAAM;IACLtC,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAAEQ,OAAO,EAAE;IAAmB,CAAC,CAAC;EACvD;AACF,CAAC,CAAC,CACH;AACDrB,WAAW,CAACqC,GAAG,CACb,cAAc,EACdjC,aAAM,EACN,IAAAE,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMQ,KAAK,GAAG,MAAMN,mBAAK,CAACO,QAAQ,CAACV,GAAG,CAACW,MAAM,CAACC,EAAE,CAAC;EACjD,IAAIH,KAAK,EAAE;IACTA,KAAK,CAAC+B,WAAW,GAAG,IAAI;IACxB/B,KAAK,CAACgC,WAAW,GAAGR,IAAI,CAACC,GAAG,EAAE;IAC9B,MAAMK,YAAY,GAAG,MAAM9B,KAAK,CAACgB,IAAI,EAAE;IACvCxB,GAAG,CAACK,IAAI,CAAC;MAAEQ,OAAO,EAAE,iBAAiB;MAAEL,KAAK,EAAE8B;IAAa,CAAC,CAAC;EAC/D,CAAC,MAAM;IACLtC,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACP,IAAI,CAAC;MAAEQ,OAAO,EAAE;IAAmB,CAAC,CAAC;EACvD;AACF,CAAC,CAAC,CACH;AAAC,eACarB,WAAW;AAAA"}},"mtime":1671298720923},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\orderModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: String,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  paidAt: Date,\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\nconst Order = _mongoose.default.model('Order', orderSchema);\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwib3JkZXJJdGVtcyIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJpbWFnZSIsInByaWNlIiwiTnVtYmVyIiwicXR5IiwicHJvZHVjdCIsInJlZiIsInVzZXIiLCJzaGlwcGluZyIsImFkZHJlc3MiLCJjaXR5IiwicG9zdGFsQ29kZSIsImNvdW50cnkiLCJwYXltZW50IiwicGF5bWVudE1ldGhvZCIsInBheW1lbnRSZXN1bHQiLCJvcmRlcklEIiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJwYWlkQXQiLCJEYXRlIiwiaXNEZWxpdmVyZWQiLCJkZWxpdmVyZWRBdCIsInRpbWVzdGFtcHMiLCJPcmRlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxcbW9kZWxzXFwiLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IG9yZGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBvcmRlckl0ZW1zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgICAgICBpbWFnZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgcHJpY2U6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgICAgIHF0eTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgcHJvZHVjdDoge1xyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuICAgIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHNoaXBwaW5nOiB7XHJcbiAgICAgIGFkZHJlc3M6IFN0cmluZyxcclxuICAgICAgY2l0eTogU3RyaW5nLFxyXG4gICAgICBwb3N0YWxDb2RlOiBTdHJpbmcsXHJcbiAgICAgIGNvdW50cnk6IFN0cmluZyxcclxuICAgIH0sXHJcbiAgICBwYXltZW50OiB7XHJcbiAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgIG9yZGVySUQ6IFN0cmluZyxcclxuICAgICAgICBwYXllcklEOiBTdHJpbmcsXHJcbiAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgaXRlbXNQcmljZTogTnVtYmVyLFxyXG4gICAgdGF4UHJpY2U6IE51bWJlcixcclxuICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgIHRvdGFsUHJpY2U6IE51bWJlcixcclxuICAgIGlzUGFpZDogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcclxuICAgIHBhaWRBdDogRGF0ZSxcclxuICAgIGlzRGVsaXZlcmVkOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgZGVsaXZlcmVkQXQ6IERhdGUsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gIH1cclxuKTtcclxuY29uc3QgT3JkZXIgPSBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBvcmRlclNjaGVtYSk7XHJcbmV4cG9ydCBkZWZhdWx0IE9yZGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBZ0M7QUFFaEMsTUFBTUEsV0FBVyxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDckM7RUFDRUMsVUFBVSxFQUFFLENBQ1Y7SUFDRUMsSUFBSSxFQUFFO01BQUVDLElBQUksRUFBRUMsTUFBTTtNQUFFQyxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3RDQyxLQUFLLEVBQUU7TUFBRUgsSUFBSSxFQUFFQyxNQUFNO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDdkNFLEtBQUssRUFBRTtNQUFFSixJQUFJLEVBQUVLLE1BQU07TUFBRUgsUUFBUSxFQUFFO0lBQUssQ0FBQztJQUN2Q0ksR0FBRyxFQUFFO01BQUVOLElBQUksRUFBRUssTUFBTTtNQUFFSCxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3JDSyxPQUFPLEVBQUU7TUFDUFAsSUFBSSxFQUFFQyxNQUFNO01BQ1pPLEdBQUcsRUFBRSxTQUFTO01BQ2ROLFFBQVEsRUFBRTtJQUNaO0VBQ0YsQ0FBQyxDQUNGO0VBQ0RPLElBQUksRUFBRTtJQUFFVCxJQUFJLEVBQUVDLE1BQU07SUFBRU8sR0FBRyxFQUFFLE1BQU07SUFBRU4sUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNuRFEsUUFBUSxFQUFFO0lBQ1JDLE9BQU8sRUFBRVYsTUFBTTtJQUNmVyxJQUFJLEVBQUVYLE1BQU07SUFDWlksVUFBVSxFQUFFWixNQUFNO0lBQ2xCYSxPQUFPLEVBQUViO0VBQ1gsQ0FBQztFQUNEYyxPQUFPLEVBQUU7SUFDUEMsYUFBYSxFQUFFZixNQUFNO0lBQ3JCZ0IsYUFBYSxFQUFFO01BQ2JDLE9BQU8sRUFBRWpCLE1BQU07TUFDZmtCLE9BQU8sRUFBRWxCLE1BQU07TUFDZm1CLFNBQVMsRUFBRW5CO0lBQ2I7RUFDRixDQUFDO0VBQ0RvQixVQUFVLEVBQUVoQixNQUFNO0VBQ2xCaUIsUUFBUSxFQUFFakIsTUFBTTtFQUNoQmtCLGFBQWEsRUFBRWxCLE1BQU07RUFDckJtQixVQUFVLEVBQUVuQixNQUFNO0VBQ2xCb0IsTUFBTSxFQUFFO0lBQUV6QixJQUFJLEVBQUUwQixPQUFPO0lBQUV4QixRQUFRLEVBQUUsSUFBSTtJQUFFeUIsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUN6REMsTUFBTSxFQUFFQyxJQUFJO0VBQ1pDLFdBQVcsRUFBRTtJQUFFOUIsSUFBSSxFQUFFMEIsT0FBTztJQUFFeEIsUUFBUSxFQUFFLElBQUk7SUFBRXlCLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDOURJLFdBQVcsRUFBRUY7QUFDZixDQUFDLEVBQ0Q7RUFDRUcsVUFBVSxFQUFFO0FBQ2QsQ0FBQyxDQUNGO0FBQ0QsTUFBTUMsS0FBSyxHQUFHckMsaUJBQVEsQ0FBQ3NDLEtBQUssQ0FBQyxPQUFPLEVBQUV2QyxXQUFXLENBQUM7QUFBQyxlQUNwQ3NDLEtBQUs7QUFBQSJ9","map":{"version":3,"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","isPaid","Boolean","default","paidAt","Date","isDelivered","deliveredAt","timestamps","Order","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["orderModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n  {\r\n    orderItems: [\r\n      {\r\n        name: { type: String, required: true },\r\n        image: { type: String, required: true },\r\n        price: { type: Number, required: true },\r\n        qty: { type: Number, required: true },\r\n        product: {\r\n          type: String,\r\n          ref: 'Product',\r\n          required: true,\r\n        },\r\n      },\r\n    ],\r\n    user: { type: String, ref: 'User', required: true },\r\n    shipping: {\r\n      address: String,\r\n      city: String,\r\n      postalCode: String,\r\n      country: String,\r\n    },\r\n    payment: {\r\n      paymentMethod: String,\r\n      paymentResult: {\r\n        orderID: String,\r\n        payerID: String,\r\n        paymentID: String,\r\n      },\r\n    },\r\n    itemsPrice: Number,\r\n    taxPrice: Number,\r\n    shippingPrice: Number,\r\n    totalPrice: Number,\r\n    isPaid: { type: Boolean, required: true, default: false },\r\n    paidAt: Date,\r\n    isDelivered: { type: Boolean, required: true, default: false },\r\n    deliveredAt: Date,\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACrC;EACEC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACtCC,KAAK,EAAE;MAAEH,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACvCE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACvCI,GAAG,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACrCK,OAAO,EAAE;MACPP,IAAI,EAAEC,MAAM;MACZO,GAAG,EAAE,SAAS;MACdN,QAAQ,EAAE;IACZ;EACF,CAAC,CACF;EACDO,IAAI,EAAE;IAAET,IAAI,EAAEC,MAAM;IAAEO,GAAG,EAAE,MAAM;IAAEN,QAAQ,EAAE;EAAK,CAAC;EACnDQ,QAAQ,EAAE;IACRC,OAAO,EAAEV,MAAM;IACfW,IAAI,EAAEX,MAAM;IACZY,UAAU,EAAEZ,MAAM;IAClBa,OAAO,EAAEb;EACX,CAAC;EACDc,OAAO,EAAE;IACPC,aAAa,EAAEf,MAAM;IACrBgB,aAAa,EAAE;MACbC,OAAO,EAAEjB,MAAM;MACfkB,OAAO,EAAElB,MAAM;MACfmB,SAAS,EAAEnB;IACb;EACF,CAAC;EACDoB,UAAU,EAAEhB,MAAM;EAClBiB,QAAQ,EAAEjB,MAAM;EAChBkB,aAAa,EAAElB,MAAM;EACrBmB,UAAU,EAAEnB,MAAM;EAClBoB,MAAM,EAAE;IAAEzB,IAAI,EAAE0B,OAAO;IAAExB,QAAQ,EAAE,IAAI;IAAEyB,OAAO,EAAE;EAAM,CAAC;EACzDC,MAAM,EAAEC,IAAI;EACZC,WAAW,EAAE;IAAE9B,IAAI,EAAE0B,OAAO;IAAExB,QAAQ,EAAE,IAAI;IAAEyB,OAAO,EAAE;EAAM,CAAC;EAC9DI,WAAW,EAAEF;AACf,CAAC,EACD;EACEG,UAAU,EAAE;AACd,CAAC,CACF;AACD,MAAMC,KAAK,GAAGrC,iBAAQ,CAACsC,KAAK,CAAC,OAAO,EAAEvC,WAAW,CAAC;AAAC,eACpCsC,KAAK;AAAA"}},"mtime":1669725404400},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\productRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst productRouter = _express.default.Router();\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const searchKeyword = req.query.searchKeyword ? {\n    name: {\n      $regex: req.query.searchKeyword,\n      $options: 'i'\n    }\n  } : {};\n  const products = await _productModel.default.find({\n    ...searchKeyword\n  });\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product Created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n    if (updatedProduct) {\n      res.send({\n        message: 'Product Updated',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Error in updaing product'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.post('/:id/reviews', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const review = {\n      rating: req.body.rating,\n      comment: req.body.comment,\n      user: req.user._id,\n      name: req.user.name\n    };\n    product.reviews.push(review);\n    product.rating = product.reviews.reduce((a, c) => c.rating + a, 0) / product.reviews.length;\n    product.numReviews = product.reviews.length;\n    const updatedProduct = await product.save();\n    res.status(201).send({\n      message: 'Comment Created.',\n      data: updatedProduct.reviews[updatedProduct.reviews.length - 1]\n    });\n  } else {\n    throw Error('Product does not exist.');\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZWFyY2hLZXl3b3JkIiwicXVlcnkiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJkZXNjcmlwdGlvbiIsImltYWdlIiwiY3JlYXRlZFByb2R1Y3QiLCJzYXZlIiwic3RhdHVzIiwibWVzc2FnZSIsInB1dCIsInByb2R1Y3RJZCIsImJvZHkiLCJwcmljZSIsImNvdW50SW5TdG9jayIsInVwZGF0ZWRQcm9kdWN0IiwiZGVsZXRlIiwiZGVsZXRlZFByb2R1Y3QiLCJyZW1vdmUiLCJyZXZpZXciLCJyYXRpbmciLCJjb21tZW50IiwidXNlciIsIl9pZCIsInJldmlld3MiLCJwdXNoIiwicmVkdWNlIiwiYSIsImMiLCJsZW5ndGgiLCJudW1SZXZpZXdzIiwiZGF0YSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJwcm9kdWN0Um91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL21vZGVscy9wcm9kdWN0TW9kZWwnO1xyXG5cclxuY29uc3QgcHJvZHVjdFJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KFxyXG4gICcvJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2VhcmNoS2V5d29yZCA9IHJlcS5xdWVyeS5zZWFyY2hLZXl3b3JkXHJcbiAgICA/IHtcclxuICAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICRyZWdleDogcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmQsXHJcbiAgICAgICAgICAgJG9wdGlvbnM6ICdpJyxcclxuICAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgOiB7fTtcclxuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5maW5kKHsgLi4uc2VhcmNoS2V5d29yZH0pO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xyXG4gIH0pXHJcbik7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KFxyXG4gICcvOmlkJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICByZXMuc2VuZChwcm9kdWN0KTtcclxuICB9KVxyXG4pO1xyXG5wcm9kdWN0Um91dGVyLnBvc3QoXHJcbiAgJy8nLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3Qoe1xyXG4gICAgICBuYW1lOiAnc2FtcGxlIHByb2R1Y3QnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ3NhbXBsZSBkZXNjJyxcclxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgaWYgKGNyZWF0ZWRQcm9kdWN0KSB7XHJcbiAgICAgIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoMjAxKVxyXG4gICAgICAgIC5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1Y3QgQ3JlYXRlZCcsIHByb2R1Y3Q6IGNyZWF0ZWRQcm9kdWN0IH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyb3IgaW4gY3JlYXRpbmcgcHJvZHVjdCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5wdXQoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIHByb2R1Y3QubmFtZSA9IHJlcS5ib2R5Lm5hbWU7XHJcbiAgICAgIHByb2R1Y3QucHJpY2UgPSByZXEuYm9keS5wcmljZTtcclxuICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xyXG4gICAgICBwcm9kdWN0LmNvdW50SW5TdG9jayA9IHJlcS5ib2R5LmNvdW50SW5TdG9jaztcclxuICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbiA9IHJlcS5ib2R5LmRlc2NyaXB0aW9uO1xyXG4gICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgICBpZiAodXBkYXRlZFByb2R1Y3QpIHtcclxuICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IFVwZGF0ZWQnLCBwcm9kdWN0OiB1cGRhdGVkUHJvZHVjdCB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdFcnJvciBpbiB1cGRhaW5nIHByb2R1Y3QnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5kZWxldGUoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIGNvbnN0IGRlbGV0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5yZW1vdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFByb2R1Y3QgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbnByb2R1Y3RSb3V0ZXIucG9zdChcclxuICAnLzppZC9yZXZpZXdzJyxcclxuICBpc0F1dGgsXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+e1xyXG4gICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIGNvbnN0IHJldmlldyA9IHtcclxuICAgICAgICByYXRpbmc6IHJlcS5ib2R5LnJhdGluZyxcclxuICAgICAgICBjb21tZW50OiByZXEuYm9keS5jb21tZW50LFxyXG4gICAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcclxuICAgICAgICBuYW1lOiByZXEudXNlci5uYW1lLFxyXG4gICAgICB9O1xyXG4gICAgICBwcm9kdWN0LnJldmlld3MucHVzaChyZXZpZXcpO1xyXG4gICAgICBwcm9kdWN0LnJhdGluZyA9XHJcbiAgICAgICBwcm9kdWN0LnJldmlld3MucmVkdWNlKChhLCBjKSA9PiBjLnJhdGluZyArIGEsIDApIC9cclxuICAgICAgIHByb2R1Y3QucmV2aWV3cy5sZW5ndGg7XHJcbiAgICAgIHByb2R1Y3QubnVtUmV2aWV3cyA9IHByb2R1Y3QucmV2aWV3cy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHtcclxuICAgICAgIG1lc3NhZ2U6ICdDb21tZW50IENyZWF0ZWQuJyxcclxuICAgICAgIGRhdGE6IHVwZGF0ZWRQcm9kdWN0LnJldmlld3NbdXBkYXRlZFByb2R1Y3QucmV2aWV3cy5sZW5ndGgtMV0sXHJcbiAgICAgIH0pO1xyXG4gICAgIH0gZWxzZSB7XHJcbiAgICAgICB0aHJvdyBFcnJvcignUHJvZHVjdCBkb2VzIG5vdCBleGlzdC4nKTtcclxuICAgICB9XHJcbiAgfSkpO1xyXG5leHBvcnQgZGVmYXVsdCBwcm9kdWN0Um91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBNkM7QUFFN0MsTUFBTUEsYUFBYSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFDdENGLGFBQWEsQ0FBQ0csR0FBRyxDQUNmLEdBQUcsRUFDSCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxhQUFhLEdBQUdGLEdBQUcsQ0FBQ0csS0FBSyxDQUFDRCxhQUFhLEdBQzNDO0lBQ0dFLElBQUksRUFBRTtNQUNKQyxNQUFNLEVBQUVMLEdBQUcsQ0FBQ0csS0FBSyxDQUFDRCxhQUFhO01BQy9CSSxRQUFRLEVBQUU7SUFDWjtFQUNILENB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","map":{"version":3,"names":["productRouter","express","Router","get","expressAsyncHandler","req","res","searchKeyword","query","name","$regex","$options","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","description","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove","review","rating","comment","user","_id","reviews","push","reduce","a","c","length","numReviews","data","Error"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["productRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Product from '../models/productModel';\r\n\r\nconst productRouter = express.Router();\r\nproductRouter.get(\r\n  '/',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const searchKeyword = req.query.searchKeyword\r\n    ? {\r\n         name: {\r\n           $regex: req.query.searchKeyword,\r\n           $options: 'i',\r\n         },\r\n      }\r\n    : {};\r\n    const products = await Product.find({ ...searchKeyword});\r\n    res.send(products);\r\n  })\r\n);\r\nproductRouter.get(\r\n  '/:id',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    res.send(product);\r\n  })\r\n);\r\nproductRouter.post(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = new Product({\r\n      name: 'sample product',\r\n      description: 'sample desc',\r\n      image: '/images/product-1.jpg',\r\n    });\r\n    const createdProduct = await product.save();\r\n    if (createdProduct) {\r\n      res\r\n        .status(201)\r\n        .send({ message: 'Product Created', product: createdProduct });\r\n    } else {\r\n      res.status(500).send({ message: 'Error in creating product' });\r\n    }\r\n  })\r\n);\r\nproductRouter.put(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const productId = req.params.id;\r\n    const product = await Product.findById(productId);\r\n    if (product) {\r\n      product.name = req.body.name;\r\n      product.price = req.body.price;\r\n      product.image = req.body.image;\r\n      product.countInStock = req.body.countInStock;\r\n      product.description = req.body.description;\r\n      const updatedProduct = await product.save();\r\n      if (updatedProduct) {\r\n        res.send({ message: 'Product Updated', product: updatedProduct });\r\n      } else {\r\n        res.status(500).send({ message: 'Error in updaing product' });\r\n      }\r\n    } else {\r\n      res.status(404).send({ message: 'Product Not Found' });\r\n    }\r\n  })\r\n);\r\nproductRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    if (product) {\r\n      const deletedProduct = await product.remove();\r\n      res.send({ message: 'Product Deleted', product: deletedProduct });\r\n    } else {\r\n      res.status(404).send({ message: 'Product Not Found' });\r\n    }\r\n  })\r\n);\r\n\r\nproductRouter.post(\r\n  '/:id/reviews',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) =>{\r\n     const product = await Product.findById(req.params.id);\r\n     if (product) {\r\n      const review = {\r\n        rating: req.body.rating,\r\n        comment: req.body.comment,\r\n        user: req.user._id,\r\n        name: req.user.name,\r\n      };\r\n      product.reviews.push(review);\r\n      product.rating =\r\n       product.reviews.reduce((a, c) => c.rating + a, 0) /\r\n       product.reviews.length;\r\n      product.numReviews = product.reviews.length;\r\n      const updatedProduct = await product.save();\r\n      res.status(201).send({\r\n       message: 'Comment Created.',\r\n       data: updatedProduct.reviews[updatedProduct.reviews.length-1],\r\n      });\r\n     } else {\r\n       throw Error('Product does not exist.');\r\n     }\r\n  }));\r\nexport default productRouter;"],"mappings":"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"}},"mtime":1670866503625},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\productModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst reviewSchema = new _mongoose.default.Schema({\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  rating: {\n    type: Number,\n    required: 0,\n    default: 0,\n    min: 0,\n    max: 5\n  },\n  comment: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  reviews: [reviewSchema]\n}, {\n  timestamps: true\n});\nconst Product = _mongoose.default.model('Product', productSchema);\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXZpZXdTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiU3RyaW5nIiwicmVmIiwicmVxdWlyZWQiLCJuYW1lIiwicmF0aW5nIiwiTnVtYmVyIiwiZGVmYXVsdCIsIm1pbiIsIm1heCIsImNvbW1lbnQiLCJ0aW1lc3RhbXBzIiwicHJvZHVjdFNjaGVtYSIsImltYWdlIiwicHJpY2UiLCJkZXNjcmlwdGlvbiIsImNvdW50SW5TdG9jayIsIm51bVJldmlld3MiLCJyZXZpZXdzIiwiUHJvZHVjdCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxcbW9kZWxzXFwiLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuY29uc3QgcmV2aWV3U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgcmF0aW5nOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogMCxcclxuICAgIGRlZmF1bHQ6IDAsXHJcbiAgICBtaW46MCxcclxuICAgIG1heDo1LFxyXG4gICB9LFxyXG4gIGNvbW1lbnQ6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XHJcbik7XHJcblxyXG5jb25zdCBwcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGltYWdlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHByaWNlOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMC4wLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHJhdGluZzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIG51bVJldmlld3M6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgcmV2aWV3czogW3Jldmlld1NjaGVtYV0sXHJcbiAgfSxcclxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5jb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLCBwcm9kdWN0U2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgUHJvZHVjdDsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQ3RDO0VBQ0NDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsR0FBRyxFQUFFLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNuREMsSUFBSSxFQUFFO0lBQUVKLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSSxDQUFDO0VBQ3JDRSxNQUFNLEVBQUU7SUFDUEwsSUFBSSxFQUFFTSxNQUFNO0lBQ1pILFFBQVEsRUFBRSxDQUFDO0lBQ1hJLE9BQU8sRUFBRSxDQUFDO0lBQ1ZDLEdBQUcsRUFBQyxDQUFDO0lBQ0xDLEdBQUcsRUFBQztFQUNMLENBQUM7RUFDRkMsT0FBTyxFQUFFO0lBQUNWLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSTtBQUN0QyxDQUFDLEVBQ0Q7RUFBRVEsVUFBVSxFQUFFO0FBQUssQ0FBQyxDQUNyQjtBQUVELE1BQU1DLGFBQWEsR0FBRyxJQUFJZixpQkFBUSxDQUFDQyxNQUFNLENBQ3ZDO0VBQ0VNLElBQUksRUFBRTtJQUFFSixJQUFJLEVBQUVDLE1BQU07SUFBRUUsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q1UsS0FBSyxFQUFFO0lBQUViLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDVyxLQUFLLEVBQUU7SUFBRWQsSUFBSSxFQUFFTSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVKLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRZLFdBQVcsRUFBRTtJQUFFZixJQUFJLEVBQUVDLE1BQU07SUFBRUUsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM3Q2EsWUFBWSxFQUFFO0lBQUVoQixJQUFJLEVBQUVNLE1BQU07SUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRUosUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxREUsTUFBTSxFQUFFO0lBQUVMLElBQUksRUFBRU0sTUFBTTtJQUFFQyxPQUFPLEVBQUUsR0FBRztJQUFFSixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3REYyxVQUFVLEVBQUU7SUFBRWpCLElBQUksRUFBRU0sTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFSixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3hEZSxPQUFPLEVBQUUsQ0FBQ3RCLFlBQVk7QUFDeEIsQ0FBQyxFQUNEO0VBQUVlLFVBQVUsRUFBRTtBQUFLLENBQUMsQ0FDckI7QUFDRCxNQUFNUSxPQUFPLEdBQUd0QixpQkFBUSxDQUFDdUIsS0FBSyxDQUFDLFNBQVMsRUFBRVIsYUFBYSxDQUFDO0FBQUMsZUFDMUNPLE9BQU87QUFBQSJ9","map":{"version":3,"names":["reviewSchema","mongoose","Schema","user","type","String","ref","required","name","rating","Number","default","min","max","comment","timestamps","productSchema","image","price","description","countInStock","numReviews","reviews","Product","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["productModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst reviewSchema = new mongoose.Schema(\r\n  {\r\n   user: { type: String, ref: 'User', required: true },\r\n   name: { type: String, required: true},\r\n   rating: {\r\n    type: Number,\r\n    required: 0,\r\n    default: 0,\r\n    min:0,\r\n    max:5,\r\n   },\r\n  comment: {type: String, required: true},\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst productSchema = new mongoose.Schema(\r\n  {\r\n    name: { type: String, required: true },\r\n    image: { type: String, required: true },\r\n    price: { type: Number, default: 0.0, required: true },\r\n    description: { type: String, required: true },\r\n    countInStock: { type: Number, default: 0, required: true },\r\n    rating: { type: Number, default: 0.0, required: true },\r\n    numReviews: { type: Number, default: 0, required: true },\r\n    reviews: [reviewSchema],\r\n  },\r\n  { timestamps: true }\r\n);\r\nconst Product = mongoose.model('Product', productSchema);\r\nexport default Product;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,YAAY,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACtC;EACCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACnDC,IAAI,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAI,CAAC;EACrCE,MAAM,EAAE;IACPL,IAAI,EAAEM,MAAM;IACZH,QAAQ,EAAE,CAAC;IACXI,OAAO,EAAE,CAAC;IACVC,GAAG,EAAC,CAAC;IACLC,GAAG,EAAC;EACL,CAAC;EACFC,OAAO,EAAE;IAACV,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAI;AACtC,CAAC,EACD;EAAEQ,UAAU,EAAE;AAAK,CAAC,CACrB;AAED,MAAMC,aAAa,GAAG,IAAIf,iBAAQ,CAACC,MAAM,CACvC;EACEM,IAAI,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EACtCU,KAAK,EAAE;IAAEb,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EACvCW,KAAK,EAAE;IAAEd,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACrDY,WAAW,EAAE;IAAEf,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EAC7Ca,YAAY,EAAE;IAAEhB,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EAC1DE,MAAM,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACtDc,UAAU,EAAE;IAAEjB,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACxDe,OAAO,EAAE,CAACtB,YAAY;AACxB,CAAC,EACD;EAAEe,UAAU,EAAE;AAAK,CAAC,CACrB;AACD,MAAMQ,OAAO,GAAGtB,iBAAQ,CAACuB,KAAK,CAAC,SAAS,EAAER,aAAa,CAAC;AAAC,eAC1CO,OAAO;AAAA"}},"mtime":1670864421640},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\uploadRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n});\nconst upload = (0, _multer.default)({\n  storage\n});\nconst uploadRouter = _express.default.Router();\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFxyb3V0ZXJzXFwiLCJzb3VyY2VzIjpbInVwbG9hZFJvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcclxuICBkZXN0aW5hdGlvbihyZXEsIGZpbGUsIGNiKSB7XHJcbiAgICBjYihudWxsLCAndXBsb2Fkcy8nKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgIGNiKG51bGwsIGAke0RhdGUubm93KCl9LmpwZ2ApO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuY29uc3QgdXBsb2FkUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnVwbG9hZFJvdXRlci5wb3N0KCcvJywgaXNBdXRoLCBpc0FkbWluLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IGltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gIH0pO1xyXG59KTtcclxuZXhwb3J0IGRlZmF1bHQgdXBsb2FkUm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQTJDO0FBRTNDLE1BQU1BLE9BQU8sR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUN6QkEsRUFBRSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUM7RUFDdEIsQ0FBQztFQUNEQyxRQUFRLENBQUNILEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUU7SUFDdEJBLEVBQUUsQ0FBQyxJQUFJLEVBQUcsR0FBRUUsSUFBSSxDQUFDQyxHQUFHLEVBQUcsTUFBSyxDQUFDO0VBQy9CO0FBQ0YsQ0FBQyxDQUFDO0FBRUYsTUFBTUMsTUFBTSxHQUFHLElBQUFULGVBQU0sRUFBQztFQUFFRDtBQUFRLENBQUMsQ0FBQztBQUNsQyxNQUFNVyxZQUFZLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVyQ0YsWUFBWSxDQUFDRyxJQUFJLENBQUMsR0FBRyxFQUFFQyxhQUFNLEVBQUVDLGNBQU8sRUFBRU4sTUFBTSxDQUFDTyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQ2IsR0FBRyxFQUFFYyxHQUFHLEtBQUs7RUFDNUVBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsS0FBSyxFQUFHLElBQUdqQixHQUFHLENBQUNDLElBQUksQ0FBQ2lCLElBQUs7RUFBRSxDQUFDLENBQUM7QUFDdEQsQ0FBQyxDQUFDO0FBQUMsZUFDWVgsWUFBWTtBQUFBIn0=","map":{"version":3,"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["uploadRouter.js"],"sourcesContent":["import express from 'express';\r\nimport multer from 'multer';\r\nimport { isAuth, isAdmin } from '../utils';\r\n\r\nconst storage = multer.diskStorage({\r\n  destination(req, file, cb) {\r\n    cb(null, 'uploads/');\r\n  },\r\n  filename(req, file, cb) {\r\n    cb(null, `${Date.now()}.jpg`);\r\n  },\r\n});\r\n\r\nconst upload = multer({ storage });\r\nconst uploadRouter = express.Router();\r\n\r\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\r\n  res.status(201).send({ image: `/${req.file.path}` });\r\n});\r\nexport default uploadRouter;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA2C;AAE3C,MAAMA,OAAO,GAAGC,eAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACzBA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACtB,CAAC;EACDC,QAAQ,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACtBA,EAAE,CAAC,IAAI,EAAG,GAAEE,IAAI,CAACC,GAAG,EAAG,MAAK,CAAC;EAC/B;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAT,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC;AAClC,MAAMW,YAAY,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAErCF,YAAY,CAACG,IAAI,CAAC,GAAG,EAAEC,aAAM,EAAEC,cAAO,EAAEN,MAAM,CAACO,MAAM,CAAC,OAAO,CAAC,EAAE,CAACb,GAAG,EAAEc,GAAG,KAAK;EAC5EA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAI,CAACiB,IAAK;EAAE,CAAC,CAAC;AACtD,CAAC,CAAC;AAAC,eACYX,YAAY;AAAA"}},"mtime":1670505764807},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nvar _default = {\n  PORT: process.env.PORT || 5000,\n  MONGODB_URL: process.env.MONGODB_URL,\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJQT1JUIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJMIiwiSldUX1NFQ1JFVCIsIlBBWVBBTF9DTElFTlRfSUQiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcblxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgUE9SVDogcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwLFxyXG4gIE1PTkdPREJfVVJMOiBwcm9jZXNzLmVudi5NT05HT0RCX1VSTCxcclxuICBKV1RfU0VDUkVUOiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxyXG4gIFBBWVBBTF9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQsXHJcbn07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE0QjtBQUU1QkEsZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFBQyxlQUVEO0VBQ2JDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLElBQUksSUFBSSxJQUFJO0VBQzlCRyxXQUFXLEVBQUVGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0VBQ3BDQyxVQUFVLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxVQUFVO0VBQ2xDQyxnQkFBZ0IsRUFBRUosT0FBTyxDQUFDQyxHQUFHLENBQUNHO0FBQ2hDLENBQUM7QUFBQSJ9","map":{"version":3,"names":["dotenv","config","PORT","process","env","MONGODB_URL","JWT_SECRET","PAYPAL_CLIENT_ID"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nexport default {\r\n  PORT: process.env.PORT || 5000,\r\n  MONGODB_URL: process.env.MONGODB_URL,\r\n  JWT_SECRET: process.env.JWT_SECRET,\r\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID,\r\n};"],"mappings":";;;;;;AAAA;AAA4B;AAE5BA,eAAM,CAACC,MAAM,EAAE;AAAC,eAED;EACbC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;EAC9BG,WAAW,EAAEF,OAAO,CAACC,GAAG,CAACC,WAAW;EACpCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACE,UAAU;EAClCC,gBAAgB,EAAEJ,OAAO,CAACC,GAAG,CAACG;AAChC,CAAC;AAAA"}},"mtime":1671374922971},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const users = await _userModel.default.find({});\n  res.send(users);\n}));\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'ecommerce',\n      phoneno: 7595861251,\n      address: 'New York City',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password,\n    phoneno: req.body.phoneno,\n    address: req.body.address\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Invalid User Data'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      phoneno: createdUser.phoneno,\n      address: createdUser.address,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'User Not Found'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    user.phoneno = req.body.phoneno || user.phoneno;\n    user.address = req.body.address || user.address;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      phoneno: updatedUser.phoneno,\n      address: updatedUser.address,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nuserRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (user) {\n    const deletedUser = await user.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedUser\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImlzQXV0aCIsImlzQWRtaW4iLCJleHByZXNzQXN5bmNIYW5kbGVyIiwicmVxIiwicmVzIiwidXNlcnMiLCJVc2VyIiwiZmluZCIsInNlbmQiLCJ1c2VyIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwaG9uZW5vIiwiYWRkcmVzcyIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwb3N0Iiwic2lnbmluVXNlciIsImZpbmRPbmUiLCJib2R5IiwiX2lkIiwidG9rZW4iLCJnZW5lcmF0ZVRva2VuIiwicHV0IiwiZmluZEJ5SWQiLCJwYXJhbXMiLCJpZCIsInVwZGF0ZWRVc2VyIiwiZGVsZXRlIiwiZGVsZXRlZFVzZXIiLCJyZW1vdmUiLCJwcm9kdWN0Il0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJ1c2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG51c2VyUm91dGVyLmdldChcclxuICAnLycsXHJcbiAgaXNBdXRoLFxyXG4gIGlzQWRtaW4sXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KTtcclxuICAgIHJlcy5zZW5kKHVzZXJzKTtcclxuICB9KVxyXG4pO1xyXG51c2VyUm91dGVyLmdldCgnL2NyZWF0ZWFkbWluJywgXHJcbmV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XHJcbiAgICAgIG5hbWU6ICdhZG1pbicsXHJcbiAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICBwYXNzd29yZDogJ2Vjb21tZXJjZScsXHJcbiAgICAgIHBob25lbm86IDc1OTU4NjEyNTEsXHJcbiAgICAgIGFkZHJlc3M6ICdOZXcgWW9yayBDaXR5JyxcclxuICAgICAgaXNBZG1pbjogdHJ1ZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcclxuICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59KVxyXG4pO1xyXG51c2VyUm91dGVyLnBvc3QoXHJcbiAgJy9zaWduaW4nLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzaWduaW5Vc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHtcclxuICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxyXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICAgIGlmICghc2lnbmluVXNlcikge1xyXG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgRW1haWwgb3IgUGFzc3dvcmQnLFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zZW5kKHtcclxuICAgICAgICBfaWQ6IHNpZ25pblVzZXIuX2lkLFxyXG4gICAgICAgIG5hbWU6IHNpZ25pblVzZXIubmFtZSxcclxuICAgICAgICBlbWFpbDogc2lnbmluVXNlci5lbWFpbCxcclxuICAgICAgICBpc0FkbWluOiBzaWduaW5Vc2VyLmlzQWRtaW4sXHJcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oc2lnbmluVXNlciksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbnVzZXJSb3V0ZXIucG9zdChcclxuICAnL3JlZ2lzdGVyJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgbmFtZTogcmVxLmJvZHkubmFtZSxcclxuICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxyXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICAgIHBob25lbm86IHJlcS5ib2R5LnBob25lbm8sXHJcbiAgICAgIGFkZHJlc3M6IHJlcS5ib2R5LmFkZHJlc3MsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcclxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBVc2VyIERhdGEnLFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zZW5kKHtcclxuICAgICAgICBfaWQ6IGNyZWF0ZWRVc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiBjcmVhdGVkVXNlci5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiBjcmVhdGVkVXNlci5lbWFpbCxcclxuICAgICAgICBwaG9uZW5vOiBjcmVhdGVkVXNlci5waG9uZW5vLFxyXG4gICAgICAgIGFkZHJlc3M6IGNyZWF0ZWRVc2VyLmFkZHJlc3MsXHJcbiAgICAgICAgaXNBZG1pbjogY3JlYXRlZFVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihjcmVhdGVkVXNlciksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbnVzZXJSb3V0ZXIucHV0KFxyXG4gICcvOmlkJyxcclxuICBpc0F1dGgsXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgTm90IEZvdW5kJyxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1c2VyLm5hbWUgPSByZXEuYm9keS5uYW1lIHx8IHVzZXIubmFtZTtcclxuICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XHJcbiAgICAgIHVzZXIucGFzc3dvcmQgPSByZXEuYm9keS5wYXNzd29yZCB8fCB1c2VyLnBhc3N3b3JkO1xyXG4gICAgICB1c2VyLnBob25lbm8gPSByZXEuYm9keS5waG9uZW5vIHx8IHVzZXIucGhvbmVubztcclxuICAgICAgdXNlci5hZGRyZXNzID0gcmVxLmJvZHkuYWRkcmVzcyB8fCB1c2VyLmFkZHJlc3M7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XHJcbiAgICAgIHJlcy5zZW5kKHtcclxuICAgICAgICBfaWQ6IHVwZGF0ZWRVc2VyLl9pZCxcclxuICAgICAgICBuYW1lOiB1cGRhdGVkVXNlci5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB1cGRhdGVkVXNlci5lbWFpbCxcclxuICAgICAgICBwaG9uZW5vOiB1cGRhdGVkVXNlci5waG9uZW5vLFxyXG4gICAgICAgIGFkZHJlc3M6IHVwZGF0ZWRVc2VyLmFkZHJlc3MsXHJcbiAgICAgICAgaXNBZG1pbjogdXBkYXRlZFVzZXIuaXNBZG1pbixcclxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbih1cGRhdGVkVXNlciksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbnVzZXJSb3V0ZXIuZGVsZXRlKFxyXG4gICcvOmlkJyxcclxuICBpc0F1dGgsXHJcbiAgaXNBZG1pbixcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICBjb25zdCBkZWxldGVkVXNlciA9IGF3YWl0IHVzZXIucmVtb3ZlKCk7XHJcbiAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIERlbGV0ZWQnLCBwcm9kdWN0OiBkZWxldGVkVXNlciB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQTBEO0FBRTFELE1BQU1BLFVBQVUsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRW5DRixVQUFVLENBQUNHLEdBQUcsQ0FDWixHQUFHLEVBQ0hDLGFBQU0sRUFDTkMsY0FBTyxFQUNQLElBQUFDLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1DLEtBQUssR0FBRyxNQUFNQyxrQkFBSSxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDakNILEdBQUcsQ0FBQ0ksSUFBSSxDQUFDSCxLQUFLLENBQUM7QUFDakIsQ0FBQyxDQUFDLENBQ0g7QUFD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","map":{"version":3,"names":["userRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","users","User","find","send","user","name","email","password","phoneno","address","createdUser","save","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","put","findById","params","id","updatedUser","delete","deletedUser","remove","product"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport User from '../models/userModel';\r\nimport { generateToken, isAuth, isAdmin } from '../utils';\r\n\r\nconst userRouter = express.Router();\r\n\r\nuserRouter.get(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const users = await User.find({});\r\n    res.send(users);\r\n  })\r\n);\r\nuserRouter.get('/createadmin', \r\nexpressAsyncHandler(async (req, res) => {\r\n  try {\r\n    const user = new User({\r\n      name: 'admin',\r\n      email: 'admin@example.com',\r\n      password: 'ecommerce',\r\n      phoneno: 7595861251,\r\n      address: 'New York City',\r\n      isAdmin: true,\r\n    });\r\n    const createdUser = await user.save();\r\n    res.send(createdUser);\r\n  } catch (err) {\r\n    res.status(500).send({ message: err.message });\r\n  }\r\n})\r\n);\r\nuserRouter.post(\r\n  '/signin',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const signinUser = await User.findOne({\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n    });\r\n    if (!signinUser) {\r\n      res.status(401).send({\r\n        message: 'Invalid Email or Password',\r\n      });\r\n    } else {\r\n      res.send({\r\n        _id: signinUser._id,\r\n        name: signinUser.name,\r\n        email: signinUser.email,\r\n        isAdmin: signinUser.isAdmin,\r\n        token: generateToken(signinUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.post(\r\n  '/register',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = new User({\r\n      name: req.body.name,\r\n      email: req.body.email,\r\n      password: req.body.password,\r\n      phoneno: req.body.phoneno,\r\n      address: req.body.address,\r\n    });\r\n    const createdUser = await user.save();\r\n    if (!createdUser) {\r\n      res.status(401).send({\r\n        message: 'Invalid User Data',\r\n      });\r\n    } else {\r\n      res.send({\r\n        _id: createdUser._id,\r\n        name: createdUser.name,\r\n        email: createdUser.email,\r\n        phoneno: createdUser.phoneno,\r\n        address: createdUser.address,\r\n        isAdmin: createdUser.isAdmin,\r\n        token: generateToken(createdUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.put(\r\n  '/:id',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n\r\n    if (!user) {\r\n      res.status(404).send({\r\n        message: 'User Not Found',\r\n      });\r\n    } else {\r\n      user.name = req.body.name || user.name;\r\n      user.email = req.body.email || user.email;\r\n      user.password = req.body.password || user.password;\r\n      user.phoneno = req.body.phoneno || user.phoneno;\r\n      user.address = req.body.address || user.address;\r\n      const updatedUser = await user.save();\r\n      res.send({\r\n        _id: updatedUser._id,\r\n        name: updatedUser.name,\r\n        email: updatedUser.email,\r\n        phoneno: updatedUser.phoneno,\r\n        address: updatedUser.address,\r\n        isAdmin: updatedUser.isAdmin,\r\n        token: generateToken(updatedUser),\r\n      });\r\n    }\r\n  })\r\n);\r\nuserRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const user = await User.findById(req.params.id);\r\n    if (user) {\r\n      const deletedUser = await user.remove();\r\n      res.send({ message: 'Order Deleted', product: deletedUser });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\nexport default userRouter;"],"mappings":"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"}},"mtime":1671412673078},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  phoneno: {\n    type: Number,\n    required: true\n  },\n  address: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwicGhvbmVubyIsIk51bWJlciIsImFkZHJlc3MiLCJpc0FkbWluIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJVc2VyIiwibW9kZWwiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsidXNlck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgZW1haWw6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgaW5kZXg6IHRydWUsXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgfSxcclxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcGhvbmVubzogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOnRydWV9LFxyXG4gIGFkZHJlc3M6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgaXNBZG1pbjogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcclxufSk7XHJcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xyXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBZ0M7QUFFaEMsTUFBTUEsVUFBVSxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FBQztFQUNyQ0MsSUFBSSxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDQyxLQUFLLEVBQUU7SUFDTEgsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RFLEtBQUssRUFBRSxJQUFJO0lBQ1hDLE1BQU0sRUFBRTtFQUNWLENBQUM7RUFDREMsUUFBUSxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDSyxPQUFPLEVBQUU7SUFBRVAsSUFBSSxFQUFFUSxNQUFNO0lBQUVOLFFBQVEsRUFBQztFQUFJLENBQUM7RUFDdkNPLE9BQU8sRUFBRTtJQUFFVCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUksQ0FBQztFQUN4Q1EsT0FBTyxFQUFFO0lBQUVWLElBQUksRUFBRVcsT0FBTztJQUFFVCxRQUFRLEVBQUUsSUFBSTtJQUFFVSxPQUFPLEVBQUU7RUFBTTtBQUMzRCxDQUFDLENBQUM7QUFDRixNQUFNQyxJQUFJLEdBQUdoQixpQkFBUSxDQUFDaUIsS0FBSyxDQUFDLE1BQU0sRUFBRWxCLFVBQVUsQ0FBQztBQUFDLGVBQ2pDaUIsSUFBSTtBQUFBIn0=","map":{"version":3,"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","phoneno","Number","address","isAdmin","Boolean","default","User","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["userModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst userSchema = new mongoose.Schema({\r\n  name: { type: String, required: true },\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n    index: true,\r\n    unique: true,\r\n  },\r\n  password: { type: String, required: true },\r\n  phoneno: { type: Number, required:true},\r\n  address: { type: String, required: true},\r\n  isAdmin: { type: Boolean, required: true, default: false },\r\n});\r\nconst User = mongoose.model('User', userSchema);\r\nexport default User;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdE,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,OAAO,EAAE;IAAEP,IAAI,EAAEQ,MAAM;IAAEN,QAAQ,EAAC;EAAI,CAAC;EACvCO,OAAO,EAAE;IAAET,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAI,CAAC;EACxCQ,OAAO,EAAE;IAAEV,IAAI,EAAEW,OAAO;IAAET,QAAQ,EAAE,IAAI;IAAEU,OAAO,EAAE;EAAM;AAC3D,CAAC,CAAC;AACF,MAAMC,IAAI,GAAGhB,iBAAQ,CAACiB,KAAK,CAAC,MAAM,EAAElB,UAAU,CAAC;AAAC,eACjCiB,IAAI;AAAA"}},"mtime":1669320035773},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst generateToken = user => {\n  return _jsonwebtoken.default.sign({\n    _id: user._id,\n    name: user.name,\n    email: user.email,\n    isAdmin: user.isAdmin\n  }, _config.default.JWT_SECRET);\n};\nexports.generateToken = generateToken;\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'Token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    _jsonwebtoken.default.verify(token, _config.default.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'Invalid Token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexports.isAuth = isAuth;\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZVRva2VuIiwidXNlciIsImp3dCIsInNpZ24iLCJfaWQiLCJuYW1lIiwiZW1haWwiLCJpc0FkbWluIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiQzpcXE1FUk4gc3RhY2tcXGUtY29tbWVyY2VcXGJhY2tlbmRcXCIsInNvdXJjZXMiOlsidXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+IHtcclxuICByZXR1cm4gand0LnNpZ24oXHJcbiAgICB7XHJcbiAgICAgIF9pZDogdXNlci5faWQsXHJcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNBZG1pbixcclxuICAgIH0sXHJcbiAgICBjb25maWcuSldUX1NFQ1JFVFxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIGlmICghYmVhcmVyVG9rZW4pIHtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcclxuICAgIGp3dC52ZXJpZnkodG9rZW4sIGNvbmZpZy5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdJbnZhbGlkIFRva2VuJyB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXEudXNlciA9IGRhdGE7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIGlmIChyZXEudXNlciAmJiByZXEudXNlci5pc0FkbWluKSB7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCB2YWxpZCBmb3IgYWRtaW4gdXNlcicgfSk7XHJcbiAgfVxyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE4QjtBQUV2QixNQUFNQSxhQUFhLEdBQUlDLElBQUksSUFBSztFQUNyQyxPQUFPQyxxQkFBRyxDQUFDQyxJQUFJLENBQ2I7SUFDRUMsR0FBRyxFQUFFSCxJQUFJLENBQUNHLEdBQUc7SUFDYkMsSUFBSSxFQUFFSixJQUFJLENBQUNJLElBQUk7SUFDZkMsS0FBSyxFQUFFTCxJQUFJLENBQUNLLEtBQUs7SUFDakJDLE9BQU8sRUFBRU4sSUFBSSxDQUFDTTtFQUNoQixDQUFDLEVBQ0RDLGVBQU0sQ0FBQ0MsVUFBVSxDQUNsQjtBQUNILENBQUM7QUFBQztBQUVLLE1BQU1DLE1BQU0sR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3hDLE1BQU1DLFdBQVcsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWE7RUFDN0MsSUFBSSxDQUFDRixXQUFXLEVBQUU7SUFDaEJGLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUM1RCxDQUFDLE1BQU07SUFDTCxNQUFNQyxLQUFLLEdBQUdOLFdBQVcsQ0FBQ08sS0FBSyxDQUFDLENBQUMsRUFBRVAsV0FBVyxDQUFDUSxNQUFNLENBQUM7SUFDdERwQixxQkFBRyxDQUFDcUIsTUFBTSxDQUFDSCxLQUFLLEVBQUVaLGVBQU0sQ0FBQ0MsVUFBVSxFQUFFLENBQUNlLEdBQUcsRUFBRUMsSUFBSSxLQUFLO01BQ2xELElBQUlELEdBQUcsRUFBRTtRQUNQWixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVDLE9BQU8sRUFBRTtRQUFnQixDQUFDLENBQUM7TUFDcEQsQ0FBQyxNQUFNO1FBQ0xSLEdBQUcsQ0FBQ1YsSUFBSSxHQUFHd0IsSUFBSTtRQUNmWixJQUFJLEVBQUU7TUFDUjtJQUNGLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUFDO0FBRUssTUFBTU4sT0FBTyxHQUFHLENBQUNJLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDekMsSUFBSUYsR0FBRyxDQUFDVixJQUFJLElBQUlVLEdBQUcsQ0FBQ1YsSUFBSSxDQUFDTSxPQUFPLEVBQUU7SUFDaENNLElBQUksRUFBRTtFQUNSLENBQUMsTUFBTTtJQUNMRCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFvQyxDQUFDLENBQUM7RUFDeEU7QUFDRixDQUFDO0FBQUMifQ==","map":{"version":3,"names":["generateToken","user","jwt","sign","_id","name","email","isAdmin","config","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\","sources":["utils.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport config from './config';\r\n\r\nexport const generateToken = (user) => {\r\n  return jwt.sign(\r\n    {\r\n      _id: user._id,\r\n      name: user.name,\r\n      email: user.email,\r\n      isAdmin: user.isAdmin,\r\n    },\r\n    config.JWT_SECRET\r\n  );\r\n};\r\n\r\nexport const isAuth = (req, res, next) => {\r\n  const bearerToken = req.headers.authorization;\r\n  if (!bearerToken) {\r\n    res.status(401).send({ message: 'Token is not supplied' });\r\n  } else {\r\n    const token = bearerToken.slice(7, bearerToken.length);\r\n    jwt.verify(token, config.JWT_SECRET, (err, data) => {\r\n      if (err) {\r\n        res.status(401).send({ message: 'Invalid Token' });\r\n      } else {\r\n        req.user = data;\r\n        next();\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport const isAdmin = (req, res, next) => {\r\n  if (req.user && req.user.isAdmin) {\r\n    next();\r\n  } else {\r\n    res.status(401).send({ message: 'Token is not valid for admin user' });\r\n  }\r\n};"],"mappings":";;;;;;AAAA;AACA;AAA8B;AAEvB,MAAMA,aAAa,GAAIC,IAAI,IAAK;EACrC,OAAOC,qBAAG,CAACC,IAAI,CACb;IACEC,GAAG,EAAEH,IAAI,CAACG,GAAG;IACbC,IAAI,EAAEJ,IAAI,CAACI,IAAI;IACfC,KAAK,EAAEL,IAAI,CAACK,KAAK;IACjBC,OAAO,EAAEN,IAAI,CAACM;EAChB,CAAC,EACDC,eAAM,CAACC,UAAU,CAClB;AACH,CAAC;AAAC;AAEK,MAAMC,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxC,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC7C,IAAI,CAACF,WAAW,EAAE;IAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMC,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC,EAAEP,WAAW,CAACQ,MAAM,CAAC;IACtDpB,qBAAG,CAACqB,MAAM,CAACH,KAAK,EAAEZ,eAAM,CAACC,UAAU,EAAE,CAACe,GAAG,EAAEC,IAAI,KAAK;MAClD,IAAID,GAAG,EAAE;QACPZ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAgB,CAAC,CAAC;MACpD,CAAC,MAAM;QACLR,GAAG,CAACV,IAAI,GAAGwB,IAAI;QACfZ,IAAI,EAAE;MACR;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAAC;AAEK,MAAMN,OAAO,GAAG,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACzC,IAAIF,GAAG,CAACV,IAAI,IAAIU,GAAG,CAACV,IAAI,CAACM,OAAO,EAAE;IAChCM,IAAI,EAAE;EACR,CAAC,MAAM;IACLD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoC,CAAC,CAAC;EACxE;AACF,CAAC;AAAC"}},"mtime":1670386327782},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\orderRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderRouter = _express.default.Router();\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New Order Created',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJpc0F1dGgiLCJpc0FkbWluIiwiZXhwcmVzc0FzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiZmluZCIsInBvcHVsYXRlIiwic2VuZCIsInVzZXIiLCJfaWQiLCJvcmRlciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsIm9yZGVySXRlbXMiLCJib2R5Iiwic2hpcHBpbmciLCJwYXltZW50IiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJjcmVhdGVkT3JkZXIiLCJzYXZlIiwiZGVsZXRlIiwiZGVsZXRlZE9yZGVyIiwicmVtb3ZlIiwicHJvZHVjdCIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0Il0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJvcmRlclJvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcclxuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgT3JkZXIgZnJvbSAnLi4vbW9kZWxzL29yZGVyTW9kZWwnO1xyXG5cclxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICcvJyxcclxuICBpc0F1dGgsXHJcbiAgaXNBZG1pbixcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7fSkucG9wdWxhdGUoJ3VzZXInKTtcclxuICAgIHJlcy5zZW5kKG9yZGVycyk7XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIuZ2V0KFxyXG4gICcvbWluZScsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKHsgdXNlcjogcmVxLnVzZXIuX2lkIH0pO1xyXG4gICAgcmVzLnNlbmQob3JkZXJzKTtcclxuICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5nZXQoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChvcmRlcikge1xyXG4gICAgICByZXMuc2VuZChvcmRlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbik7XHJcbm9yZGVyUm91dGVyLnBvc3QoXHJcbiAgJy8nLFxyXG4gIGlzQXV0aCxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xyXG4gICAgICBvcmRlckl0ZW1zOiByZXEuYm9keS5vcmRlckl0ZW1zLFxyXG4gICAgICB1c2VyOiByZXEudXNlci5faWQsXHJcbiAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcclxuICAgICAgcGF5bWVudDogcmVxLmJvZHkucGF5bWVudCxcclxuICAgICAgaXRlbXNQcmljZTogcmVxLmJvZHkuaXRlbXNQcmljZSxcclxuICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxyXG4gICAgICBzaGlwcGluZ1ByaWNlOiByZXEuYm9keS5zaGlwcGluZ1ByaWNlLFxyXG4gICAgICB0b3RhbFByaWNlOiByZXEuYm9keS50b3RhbFByaWNlLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdOZXcgT3JkZXIgQ3JlYXRlZCcsIG9yZGVyOiBjcmVhdGVkT3JkZXIgfSk7XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIuZGVsZXRlKFxyXG4gICcvOmlkJyxcclxuICBpc0F1dGgsXHJcbiAgaXNBZG1pbixcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChvcmRlcikge1xyXG4gICAgICBjb25zdCBkZWxldGVkT3JkZXIgPSBhd2FpdCBvcmRlci5yZW1vdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsZXRlZCcsIHByb2R1Y3Q6IGRlbGV0ZWRPcmRlciB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxub3JkZXJSb3V0ZXIucHV0KFxyXG4gICcvOmlkL3BheScsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgIG9yZGVyLmlzUGFpZCA9IHRydWU7XHJcbiAgICAgIG9yZGVyLnBhaWRBdCA9IERhdGUubm93KCk7XHJcbiAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcclxuICAgICAgICBwYXllcklEOiByZXEuYm9keS5wYXllcklELFxyXG4gICAgICAgIHBheW1lbnRJRDogcmVxLmJvZHkucGF5bWVudElELFxyXG4gICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnNhdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgUGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5vcmRlclJvdXRlci5wdXQoXHJcbiAgJy86aWQvZGVsaXZlcicsXHJcbiAgaXNBdXRoLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgaWYgKG9yZGVyKSB7XHJcbiAgICAgIG9yZGVyLmlzRGVsaXZlcmVkID0gdHJ1ZTtcclxuICAgICAgb3JkZXIuZGVsaXZlcmVkQXQgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBhd2FpdCBvcmRlci5zYXZlKCk7XHJcbiAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIERlbGl2ZXJlZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQuJyB9KTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5leHBvcnQgZGVmYXVsdCBvcmRlclJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQXlDO0FBRXpDLE1BQU1BLFdBQVcsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXBDRixXQUFXLENBQUNHLEdBQUcsQ0FDYixHQUFHLEVBQ0hDLGFBQU0sRUFDTkMsY0FBTyxFQUNQLElBQUFDLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxtQkFBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLE1BQU0sQ0FBQztFQUNwREosR0FBRyxDQUFDSyxJQUFJLENBQUNKLE1BQU0sQ0FBQztBQUNsQixDQUFDLENBQUMsQ0FDSDtBQUNEVCxXQUFXLENBQUNHLEdBQUcsQ0FDYixPQUFPLEVBQ1BDLGFBQU0sRUFDTixJQUFBRSw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsSUFBSSxDQUFDO0lBQUVHLElBQUksRUFBRVAsR0FBRyxDQUFDTyxJQUFJLENBQUNDO0VBQUksQ0FBQyxDQUFDO0VBQ3ZEUCxHQUFHLENBQUNLLElBQUksQ0FBQ0osTUFBTSxDQUFDO0FBQ2xCLENBQUMsQ0FBQyxDQUNIO0FBQ0RULFdBQVcsQ0FBQ0csR0FBRyxDQUNiLE1BQU0sRUFDTkMsYUFBTSxFQUNOLElBQUFFLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1RLEtBQUssR0FBRyxNQUFNTixtQkFBSyxDQUFDTyxRQUFRLENBQUNWLEdBQUcsQ0FBQ1csTUFBTSxDQUFDQyxFQUFFLENBQUM7RUFDakQsSUFB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","map":{"version":3,"names":["orderRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","orders","Order","find","populate","send","user","_id","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["orderRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Order from '../models/orderModel';\r\n\r\nconst orderRouter = express.Router();\r\n\r\norderRouter.get(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({}).populate('user');\r\n    res.send(orders);\r\n  })\r\n);\r\norderRouter.get(\r\n  '/mine',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const orders = await Order.find({ user: req.user._id });\r\n    res.send(orders);\r\n  })\r\n);\r\norderRouter.get(\r\n  '/:id',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      res.send(order);\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\norderRouter.post(\r\n  '/',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = new Order({\r\n      orderItems: req.body.orderItems,\r\n      user: req.user._id,\r\n      shipping: req.body.shipping,\r\n      payment: req.body.payment,\r\n      itemsPrice: req.body.itemsPrice,\r\n      taxPrice: req.body.taxPrice,\r\n      shippingPrice: req.body.shippingPrice,\r\n      totalPrice: req.body.totalPrice,\r\n    });\r\n    const createdOrder = await order.save();\r\n    res.status(201).send({ message: 'New Order Created', order: createdOrder });\r\n  })\r\n);\r\norderRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      const deletedOrder = await order.remove();\r\n      res.send({ message: 'Order Deleted', product: deletedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found' });\r\n    }\r\n  })\r\n);\r\norderRouter.put(\r\n  '/:id/pay',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      order.isPaid = true;\r\n      order.paidAt = Date.now();\r\n      order.payment.paymentResult = {\r\n        payerID: req.body.payerID,\r\n        paymentID: req.body.paymentID,\r\n        orderID: req.body.orderID,\r\n      };\r\n      const updatedOrder = await order.save();\r\n      res.send({ message: 'Order Paid', order: updatedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found.' });\r\n    }\r\n  })\r\n);\r\norderRouter.put(\r\n  '/:id/deliver',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const order = await Order.findById(req.params.id);\r\n    if (order) {\r\n      order.isDelivered = true;\r\n      order.deliveredAt = Date.now();\r\n      const updatedOrder = await order.save();\r\n      res.send({ message: 'Order Delivered', order: updatedOrder });\r\n    } else {\r\n      res.status(404).send({ message: 'Order Not Found.' });\r\n    }\r\n  })\r\n);\r\nexport default orderRouter;"],"mappings":"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"}},"mtime":1671298720923},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\orderModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: String,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  paidAt: Date,\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\nconst Order = _mongoose.default.model('Order', orderSchema);\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwib3JkZXJJdGVtcyIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJpbWFnZSIsInByaWNlIiwiTnVtYmVyIiwicXR5IiwicHJvZHVjdCIsInJlZiIsInVzZXIiLCJzaGlwcGluZyIsImFkZHJlc3MiLCJjaXR5IiwicG9zdGFsQ29kZSIsImNvdW50cnkiLCJwYXltZW50IiwicGF5bWVudE1ldGhvZCIsInBheW1lbnRSZXN1bHQiLCJvcmRlcklEIiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIml0ZW1zUHJpY2UiLCJ0YXhQcmljZSIsInNoaXBwaW5nUHJpY2UiLCJ0b3RhbFByaWNlIiwiaXNQYWlkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJwYWlkQXQiLCJEYXRlIiwiaXNEZWxpdmVyZWQiLCJkZWxpdmVyZWRBdCIsInRpbWVzdGFtcHMiLCJPcmRlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxcbW9kZWxzXFwiLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IG9yZGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBvcmRlckl0ZW1zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgICAgICBpbWFnZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgcHJpY2U6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgICAgIHF0eTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgcHJvZHVjdDoge1xyXG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgXSxcclxuICAgIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHNoaXBwaW5nOiB7XHJcbiAgICAgIGFkZHJlc3M6IFN0cmluZyxcclxuICAgICAgY2l0eTogU3RyaW5nLFxyXG4gICAgICBwb3N0YWxDb2RlOiBTdHJpbmcsXHJcbiAgICAgIGNvdW50cnk6IFN0cmluZyxcclxuICAgIH0sXHJcbiAgICBwYXltZW50OiB7XHJcbiAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcclxuICAgICAgcGF5bWVudFJlc3VsdDoge1xyXG4gICAgICAgIG9yZGVySUQ6IFN0cmluZyxcclxuICAgICAgICBwYXllcklEOiBTdHJpbmcsXHJcbiAgICAgICAgcGF5bWVudElEOiBTdHJpbmcsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgaXRlbXNQcmljZTogTnVtYmVyLFxyXG4gICAgdGF4UHJpY2U6IE51bWJlcixcclxuICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcclxuICAgIHRvdGFsUHJpY2U6IE51bWJlcixcclxuICAgIGlzUGFpZDogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcclxuICAgIHBhaWRBdDogRGF0ZSxcclxuICAgIGlzRGVsaXZlcmVkOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgZGVsaXZlcmVkQXQ6IERhdGUsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG4gIH1cclxuKTtcclxuY29uc3QgT3JkZXIgPSBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBvcmRlclNjaGVtYSk7XHJcbmV4cG9ydCBkZWZhdWx0IE9yZGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBZ0M7QUFFaEMsTUFBTUEsV0FBVyxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDckM7RUFDRUMsVUFBVSxFQUFFLENBQ1Y7SUFDRUMsSUFBSSxFQUFFO01BQUVDLElBQUksRUFBRUMsTUFBTTtNQUFFQyxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3RDQyxLQUFLLEVBQUU7TUFBRUgsSUFBSSxFQUFFQyxNQUFNO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDdkNFLEtBQUssRUFBRTtNQUFFSixJQUFJLEVBQUVLLE1BQU07TUFBRUgsUUFBUSxFQUFFO0lBQUssQ0FBQztJQUN2Q0ksR0FBRyxFQUFFO01BQUVOLElBQUksRUFBRUssTUFBTTtNQUFFSCxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3JDSyxPQUFPLEVBQUU7TUFDUFAsSUFBSSxFQUFFQyxNQUFNO01BQ1pPLEdBQUcsRUFBRSxTQUFTO01BQ2ROLFFBQVEsRUFBRTtJQUNaO0VBQ0YsQ0FBQyxDQUNGO0VBQ0RPLElBQUksRUFBRTtJQUFFVCxJQUFJLEVBQUVDLE1BQU07SUFBRU8sR0FBRyxFQUFFLE1BQU07SUFBRU4sUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNuRFEsUUFBUSxFQUFFO0lBQ1JDLE9BQU8sRUFBRVYsTUFBTTtJQUNmVyxJQUFJLEVBQUVYLE1BQU07SUFDWlksVUFBVSxFQUFFWixNQUFNO0lBQ2xCYSxPQUFPLEVBQUViO0VBQ1gsQ0FBQztFQUNEYyxPQUFPLEVBQUU7SUFDUEMsYUFBYSxFQUFFZixNQUFNO0lBQ3JCZ0IsYUFBYSxFQUFFO01BQ2JDLE9BQU8sRUFBRWpCLE1BQU07TUFDZmtCLE9BQU8sRUFBRWxCLE1BQU07TUFDZm1CLFNBQVMsRUFBRW5CO0lBQ2I7RUFDRixDQUFDO0VBQ0RvQixVQUFVLEVBQUVoQixNQUFNO0VBQ2xCaUIsUUFBUSxFQUFFakIsTUFBTTtFQUNoQmtCLGFBQWEsRUFBRWxCLE1BQU07RUFDckJtQixVQUFVLEVBQUVuQixNQUFNO0VBQ2xCb0IsTUFBTSxFQUFFO0lBQUV6QixJQUFJLEVBQUUwQixPQUFPO0lBQUV4QixRQUFRLEVBQUUsSUFBSTtJQUFFeUIsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUN6REMsTUFBTSxFQUFFQyxJQUFJO0VBQ1pDLFdBQVcsRUFBRTtJQUFFOUIsSUFBSSxFQUFFMEIsT0FBTztJQUFFeEIsUUFBUSxFQUFFLElBQUk7SUFBRXlCLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDOURJLFdBQVcsRUFBRUY7QUFDZixDQUFDLEVBQ0Q7RUFDRUcsVUFBVSxFQUFFO0FBQ2QsQ0FBQyxDQUNGO0FBQ0QsTUFBTUMsS0FBSyxHQUFHckMsaUJBQVEsQ0FBQ3NDLEtBQUssQ0FBQyxPQUFPLEVBQUV2QyxXQUFXLENBQUM7QUFBQyxlQUNwQ3NDLEtBQUs7QUFBQSJ9","map":{"version":3,"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","isPaid","Boolean","default","paidAt","Date","isDelivered","deliveredAt","timestamps","Order","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["orderModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst orderSchema = new mongoose.Schema(\r\n  {\r\n    orderItems: [\r\n      {\r\n        name: { type: String, required: true },\r\n        image: { type: String, required: true },\r\n        price: { type: Number, required: true },\r\n        qty: { type: Number, required: true },\r\n        product: {\r\n          type: String,\r\n          ref: 'Product',\r\n          required: true,\r\n        },\r\n      },\r\n    ],\r\n    user: { type: String, ref: 'User', required: true },\r\n    shipping: {\r\n      address: String,\r\n      city: String,\r\n      postalCode: String,\r\n      country: String,\r\n    },\r\n    payment: {\r\n      paymentMethod: String,\r\n      paymentResult: {\r\n        orderID: String,\r\n        payerID: String,\r\n        paymentID: String,\r\n      },\r\n    },\r\n    itemsPrice: Number,\r\n    taxPrice: Number,\r\n    shippingPrice: Number,\r\n    totalPrice: Number,\r\n    isPaid: { type: Boolean, required: true, default: false },\r\n    paidAt: Date,\r\n    isDelivered: { type: Boolean, required: true, default: false },\r\n    deliveredAt: Date,\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\nconst Order = mongoose.model('Order', orderSchema);\r\nexport default Order;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACrC;EACEC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACtCC,KAAK,EAAE;MAAEH,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACvCE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACvCI,GAAG,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACrCK,OAAO,EAAE;MACPP,IAAI,EAAEC,MAAM;MACZO,GAAG,EAAE,SAAS;MACdN,QAAQ,EAAE;IACZ;EACF,CAAC,CACF;EACDO,IAAI,EAAE;IAAET,IAAI,EAAEC,MAAM;IAAEO,GAAG,EAAE,MAAM;IAAEN,QAAQ,EAAE;EAAK,CAAC;EACnDQ,QAAQ,EAAE;IACRC,OAAO,EAAEV,MAAM;IACfW,IAAI,EAAEX,MAAM;IACZY,UAAU,EAAEZ,MAAM;IAClBa,OAAO,EAAEb;EACX,CAAC;EACDc,OAAO,EAAE;IACPC,aAAa,EAAEf,MAAM;IACrBgB,aAAa,EAAE;MACbC,OAAO,EAAEjB,MAAM;MACfkB,OAAO,EAAElB,MAAM;MACfmB,SAAS,EAAEnB;IACb;EACF,CAAC;EACDoB,UAAU,EAAEhB,MAAM;EAClBiB,QAAQ,EAAEjB,MAAM;EAChBkB,aAAa,EAAElB,MAAM;EACrBmB,UAAU,EAAEnB,MAAM;EAClBoB,MAAM,EAAE;IAAEzB,IAAI,EAAE0B,OAAO;IAAExB,QAAQ,EAAE,IAAI;IAAEyB,OAAO,EAAE;EAAM,CAAC;EACzDC,MAAM,EAAEC,IAAI;EACZC,WAAW,EAAE;IAAE9B,IAAI,EAAE0B,OAAO;IAAExB,QAAQ,EAAE,IAAI;IAAEyB,OAAO,EAAE;EAAM,CAAC;EAC9DI,WAAW,EAAEF;AACf,CAAC,EACD;EACEG,UAAU,EAAE;AACd,CAAC,CACF;AACD,MAAMC,KAAK,GAAGrC,iBAAQ,CAACsC,KAAK,CAAC,OAAO,EAAEvC,WAAW,CAAC;AAAC,eACpCsC,KAAK;AAAA"}},"mtime":1669725404400},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\productRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst productRouter = _express.default.Router();\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const searchKeyword = req.query.searchKeyword ? {\n    name: {\n      $regex: req.query.searchKeyword,\n      $options: 'i'\n    }\n  } : {};\n  const products = await _productModel.default.find({\n    ...searchKeyword\n  });\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product Created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n    if (updatedProduct) {\n      res.send({\n        message: 'Product Updated',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Error in updaing product'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.post('/:id/reviews', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const review = {\n      rating: req.body.rating,\n      comment: req.body.comment,\n      user: req.user._id,\n      name: req.user.name\n    };\n    product.reviews.push(review);\n    product.rating = product.reviews.reduce((a, c) => c.rating + a, 0) / product.reviews.length;\n    product.numReviews = product.reviews.length;\n    const updatedProduct = await product.save();\n    res.status(201).send({\n      message: 'Comment Created.',\n      data: updatedProduct.reviews[updatedProduct.reviews.length - 1]\n    });\n  } else {\n    throw Error('Product does not exist.');\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZWFyY2hLZXl3b3JkIiwicXVlcnkiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJkZXNjcmlwdGlvbiIsImltYWdlIiwiY3JlYXRlZFByb2R1Y3QiLCJzYXZlIiwic3RhdHVzIiwibWVzc2FnZSIsInB1dCIsInByb2R1Y3RJZCIsImJvZHkiLCJwcmljZSIsImNvdW50SW5TdG9jayIsInVwZGF0ZWRQcm9kdWN0IiwiZGVsZXRlIiwiZGVsZXRlZFByb2R1Y3QiLCJyZW1vdmUiLCJyZXZpZXciLCJyYXRpbmciLCJjb21tZW50IiwidXNlciIsIl9pZCIsInJldmlld3MiLCJwdXNoIiwicmVkdWNlIiwiYSIsImMiLCJsZW5ndGgiLCJudW1SZXZpZXdzIiwiZGF0YSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxccm91dGVyc1xcIiwic291cmNlcyI6WyJwcm9kdWN0Um91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL21vZGVscy9wcm9kdWN0TW9kZWwnO1xyXG5cclxuY29uc3QgcHJvZHVjdFJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KFxyXG4gICcvJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2VhcmNoS2V5d29yZCA9IHJlcS5xdWVyeS5zZWFyY2hLZXl3b3JkXHJcbiAgICA/IHtcclxuICAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICRyZWdleDogcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmQsXHJcbiAgICAgICAgICAgJG9wdGlvbnM6ICdpJyxcclxuICAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgOiB7fTtcclxuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5maW5kKHsgLi4uc2VhcmNoS2V5d29yZH0pO1xyXG4gICAgcmVzLnNlbmQocHJvZHVjdHMpO1xyXG4gIH0pXHJcbik7XHJcbnByb2R1Y3RSb3V0ZXIuZ2V0KFxyXG4gICcvOmlkJyxcclxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XHJcbiAgICByZXMuc2VuZChwcm9kdWN0KTtcclxuICB9KVxyXG4pO1xyXG5wcm9kdWN0Um91dGVyLnBvc3QoXHJcbiAgJy8nLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3Qoe1xyXG4gICAgICBuYW1lOiAnc2FtcGxlIHByb2R1Y3QnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ3NhbXBsZSBkZXNjJyxcclxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgaWYgKGNyZWF0ZWRQcm9kdWN0KSB7XHJcbiAgICAgIHJlc1xyXG4gICAgICAgIC5zdGF0dXMoMjAxKVxyXG4gICAgICAgIC5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1Y3QgQ3JlYXRlZCcsIHByb2R1Y3Q6IGNyZWF0ZWRQcm9kdWN0IH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyb3IgaW4gY3JlYXRpbmcgcHJvZHVjdCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5wdXQoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIHByb2R1Y3QubmFtZSA9IHJlcS5ib2R5Lm5hbWU7XHJcbiAgICAgIHByb2R1Y3QucHJpY2UgPSByZXEuYm9keS5wcmljZTtcclxuICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xyXG4gICAgICBwcm9kdWN0LmNvdW50SW5TdG9jayA9IHJlcS5ib2R5LmNvdW50SW5TdG9jaztcclxuICAgICAgcHJvZHVjdC5kZXNjcmlwdGlvbiA9IHJlcS5ib2R5LmRlc2NyaXB0aW9uO1xyXG4gICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xyXG4gICAgICBpZiAodXBkYXRlZFByb2R1Y3QpIHtcclxuICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IFVwZGF0ZWQnLCBwcm9kdWN0OiB1cGRhdGVkUHJvZHVjdCB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdFcnJvciBpbiB1cGRhaW5nIHByb2R1Y3QnIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxucHJvZHVjdFJvdXRlci5kZWxldGUoXHJcbiAgJy86aWQnLFxyXG4gIGlzQXV0aCxcclxuICBpc0FkbWluLFxyXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIGNvbnN0IGRlbGV0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5yZW1vdmUoKTtcclxuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFByb2R1Y3QgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IE5vdCBGb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbnByb2R1Y3RSb3V0ZXIucG9zdChcclxuICAnLzppZC9yZXZpZXdzJyxcclxuICBpc0F1dGgsXHJcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+e1xyXG4gICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgIGNvbnN0IHJldmlldyA9IHtcclxuICAgICAgICByYXRpbmc6IHJlcS5ib2R5LnJhdGluZyxcclxuICAgICAgICBjb21tZW50OiByZXEuYm9keS5jb21tZW50LFxyXG4gICAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcclxuICAgICAgICBuYW1lOiByZXEudXNlci5uYW1lLFxyXG4gICAgICB9O1xyXG4gICAgICBwcm9kdWN0LnJldmlld3MucHVzaChyZXZpZXcpO1xyXG4gICAgICBwcm9kdWN0LnJhdGluZyA9XHJcbiAgICAgICBwcm9kdWN0LnJldmlld3MucmVkdWNlKChhLCBjKSA9PiBjLnJhdGluZyArIGEsIDApIC9cclxuICAgICAgIHByb2R1Y3QucmV2aWV3cy5sZW5ndGg7XHJcbiAgICAgIHByb2R1Y3QubnVtUmV2aWV3cyA9IHByb2R1Y3QucmV2aWV3cy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHtcclxuICAgICAgIG1lc3NhZ2U6ICdDb21tZW50IENyZWF0ZWQuJyxcclxuICAgICAgIGRhdGE6IHVwZGF0ZWRQcm9kdWN0LnJldmlld3NbdXBkYXRlZFByb2R1Y3QucmV2aWV3cy5sZW5ndGgtMV0sXHJcbiAgICAgIH0pO1xyXG4gICAgIH0gZWxzZSB7XHJcbiAgICAgICB0aHJvdyBFcnJvcignUHJvZHVjdCBkb2VzIG5vdCBleGlzdC4nKTtcclxuICAgICB9XHJcbiAgfSkpO1xyXG5leHBvcnQgZGVmYXVsdCBwcm9kdWN0Um91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBNkM7QUFFN0MsTUFBTUEsYUFBYSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFDdENGLGFBQWEsQ0FBQ0csR0FBRyxDQUNmLEdBQUcsRUFDSCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxhQUFhLEdBQUdGLEdBQUcsQ0FBQ0csS0FBSyxDQUFDRCxhQUFhLEdBQzNDO0lBQ0dFLElBQUksRUFBRTtNQUNKQyxNQUFNLEVBQUVMLEdBQUcsQ0FBQ0csS0FBSyxDQUFDRCxhQUFhO01BQy9CSSxRQUFRLEVBQUU7SUFDWjtFQUNILENB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","map":{"version":3,"names":["productRouter","express","Router","get","expressAsyncHandler","req","res","searchKeyword","query","name","$regex","$options","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","description","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove","review","rating","comment","user","_id","reviews","push","reduce","a","c","length","numReviews","data","Error"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["productRouter.js"],"sourcesContent":["import express from 'express';\r\nimport expressAsyncHandler from 'express-async-handler';\r\nimport { isAuth, isAdmin } from '../utils';\r\nimport Product from '../models/productModel';\r\n\r\nconst productRouter = express.Router();\r\nproductRouter.get(\r\n  '/',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const searchKeyword = req.query.searchKeyword\r\n    ? {\r\n         name: {\r\n           $regex: req.query.searchKeyword,\r\n           $options: 'i',\r\n         },\r\n      }\r\n    : {};\r\n    const products = await Product.find({ ...searchKeyword});\r\n    res.send(products);\r\n  })\r\n);\r\nproductRouter.get(\r\n  '/:id',\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    res.send(product);\r\n  })\r\n);\r\nproductRouter.post(\r\n  '/',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = new Product({\r\n      name: 'sample product',\r\n      description: 'sample desc',\r\n      image: '/images/product-1.jpg',\r\n    });\r\n    const createdProduct = await product.save();\r\n    if (createdProduct) {\r\n      res\r\n        .status(201)\r\n        .send({ message: 'Product Created', product: createdProduct });\r\n    } else {\r\n      res.status(500).send({ message: 'Error in creating product' });\r\n    }\r\n  })\r\n);\r\nproductRouter.put(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const productId = req.params.id;\r\n    const product = await Product.findById(productId);\r\n    if (product) {\r\n      product.name = req.body.name;\r\n      product.price = req.body.price;\r\n      product.image = req.body.image;\r\n      product.countInStock = req.body.countInStock;\r\n      product.description = req.body.description;\r\n      const updatedProduct = await product.save();\r\n      if (updatedProduct) {\r\n        res.send({ message: 'Product Updated', product: updatedProduct });\r\n      } else {\r\n        res.status(500).send({ message: 'Error in updaing product' });\r\n      }\r\n    } else {\r\n      res.status(404).send({ message: 'Product Not Found' });\r\n    }\r\n  })\r\n);\r\nproductRouter.delete(\r\n  '/:id',\r\n  isAuth,\r\n  isAdmin,\r\n  expressAsyncHandler(async (req, res) => {\r\n    const product = await Product.findById(req.params.id);\r\n    if (product) {\r\n      const deletedProduct = await product.remove();\r\n      res.send({ message: 'Product Deleted', product: deletedProduct });\r\n    } else {\r\n      res.status(404).send({ message: 'Product Not Found' });\r\n    }\r\n  })\r\n);\r\n\r\nproductRouter.post(\r\n  '/:id/reviews',\r\n  isAuth,\r\n  expressAsyncHandler(async (req, res) =>{\r\n     const product = await Product.findById(req.params.id);\r\n     if (product) {\r\n      const review = {\r\n        rating: req.body.rating,\r\n        comment: req.body.comment,\r\n        user: req.user._id,\r\n        name: req.user.name,\r\n      };\r\n      product.reviews.push(review);\r\n      product.rating =\r\n       product.reviews.reduce((a, c) => c.rating + a, 0) /\r\n       product.reviews.length;\r\n      product.numReviews = product.reviews.length;\r\n      const updatedProduct = await product.save();\r\n      res.status(201).send({\r\n       message: 'Comment Created.',\r\n       data: updatedProduct.reviews[updatedProduct.reviews.length-1],\r\n      });\r\n     } else {\r\n       throw Error('Product does not exist.');\r\n     }\r\n  }));\r\nexport default productRouter;"],"mappings":"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"}},"mtime":1670866503625},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\models\\\\productModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst reviewSchema = new _mongoose.default.Schema({\n  user: {\n    type: String,\n    ref: 'User',\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  rating: {\n    type: Number,\n    required: 0,\n    default: 0,\n    min: 0,\n    max: 5\n  },\n  comment: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  reviews: [reviewSchema]\n}, {\n  timestamps: true\n});\nconst Product = _mongoose.default.model('Product', productSchema);\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXZpZXdTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiU3RyaW5nIiwicmVmIiwicmVxdWlyZWQiLCJuYW1lIiwicmF0aW5nIiwiTnVtYmVyIiwiZGVmYXVsdCIsIm1pbiIsIm1heCIsImNvbW1lbnQiLCJ0aW1lc3RhbXBzIiwicHJvZHVjdFNjaGVtYSIsImltYWdlIiwicHJpY2UiLCJkZXNjcmlwdGlvbiIsImNvdW50SW5TdG9jayIsIm51bVJldmlld3MiLCJyZXZpZXdzIiwiUHJvZHVjdCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiJDOlxcTUVSTiBzdGFja1xcZS1jb21tZXJjZVxcYmFja2VuZFxcbW9kZWxzXFwiLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuY29uc3QgcmV2aWV3U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgcmF0aW5nOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogMCxcclxuICAgIGRlZmF1bHQ6IDAsXHJcbiAgICBtaW46MCxcclxuICAgIG1heDo1LFxyXG4gICB9LFxyXG4gIGNvbW1lbnQ6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlfSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XHJcbik7XHJcblxyXG5jb25zdCBwcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcclxuICB7XHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGltYWdlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHByaWNlOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMC4wLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgZGVzY3JpcHRpb246IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHJhdGluZzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIG51bVJldmlld3M6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgcmV2aWV3czogW3Jldmlld1NjaGVtYV0sXHJcbiAgfSxcclxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5jb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLCBwcm9kdWN0U2NoZW1hKTtcclxuZXhwb3J0IGRlZmF1bHQgUHJvZHVjdDsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQ3RDO0VBQ0NDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsR0FBRyxFQUFFLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNuREMsSUFBSSxFQUFFO0lBQUVKLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSSxDQUFDO0VBQ3JDRSxNQUFNLEVBQUU7SUFDUEwsSUFBSSxFQUFFTSxNQUFNO0lBQ1pILFFBQVEsRUFBRSxDQUFDO0lBQ1hJLE9BQU8sRUFBRSxDQUFDO0lBQ1ZDLEdBQUcsRUFBQyxDQUFDO0lBQ0xDLEdBQUcsRUFBQztFQUNMLENBQUM7RUFDRkMsT0FBTyxFQUFFO0lBQUNWLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSTtBQUN0QyxDQUFDLEVBQ0Q7RUFBRVEsVUFBVSxFQUFFO0FBQUssQ0FBQyxDQUNyQjtBQUVELE1BQU1DLGFBQWEsR0FBRyxJQUFJZixpQkFBUSxDQUFDQyxNQUFNLENBQ3ZDO0VBQ0VNLElBQUksRUFBRTtJQUFFSixJQUFJLEVBQUVDLE1BQU07SUFBRUUsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q1UsS0FBSyxFQUFFO0lBQUViLElBQUksRUFBRUMsTUFBTTtJQUFFRSxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDVyxLQUFLLEVBQUU7SUFBRWQsSUFBSSxFQUFFTSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVKLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRZLFdBQVcsRUFBRTtJQUFFZixJQUFJLEVBQUVDLE1BQU07SUFBRUUsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM3Q2EsWUFBWSxFQUFFO0lBQUVoQixJQUFJLEVBQUVNLE1BQU07SUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRUosUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxREUsTUFBTSxFQUFFO0lBQUVMLElBQUksRUFBRU0sTUFBTTtJQUFFQyxPQUFPLEVBQUUsR0FBRztJQUFFSixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3REYyxVQUFVLEVBQUU7SUFBRWpCLElBQUksRUFBRU0sTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFSixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3hEZSxPQUFPLEVBQUUsQ0FBQ3RCLFlBQVk7QUFDeEIsQ0FBQyxFQUNEO0VBQUVlLFVBQVUsRUFBRTtBQUFLLENBQUMsQ0FDckI7QUFDRCxNQUFNUSxPQUFPLEdBQUd0QixpQkFBUSxDQUFDdUIsS0FBSyxDQUFDLFNBQVMsRUFBRVIsYUFBYSxDQUFDO0FBQUMsZUFDMUNPLE9BQU87QUFBQSJ9","map":{"version":3,"names":["reviewSchema","mongoose","Schema","user","type","String","ref","required","name","rating","Number","default","min","max","comment","timestamps","productSchema","image","price","description","countInStock","numReviews","reviews","Product","model"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\models\\","sources":["productModel.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst reviewSchema = new mongoose.Schema(\r\n  {\r\n   user: { type: String, ref: 'User', required: true },\r\n   name: { type: String, required: true},\r\n   rating: {\r\n    type: Number,\r\n    required: 0,\r\n    default: 0,\r\n    min:0,\r\n    max:5,\r\n   },\r\n  comment: {type: String, required: true},\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst productSchema = new mongoose.Schema(\r\n  {\r\n    name: { type: String, required: true },\r\n    image: { type: String, required: true },\r\n    price: { type: Number, default: 0.0, required: true },\r\n    description: { type: String, required: true },\r\n    countInStock: { type: Number, default: 0, required: true },\r\n    rating: { type: Number, default: 0.0, required: true },\r\n    numReviews: { type: Number, default: 0, required: true },\r\n    reviews: [reviewSchema],\r\n  },\r\n  { timestamps: true }\r\n);\r\nconst Product = mongoose.model('Product', productSchema);\r\nexport default Product;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,YAAY,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACtC;EACCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACnDC,IAAI,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAI,CAAC;EACrCE,MAAM,EAAE;IACPL,IAAI,EAAEM,MAAM;IACZH,QAAQ,EAAE,CAAC;IACXI,OAAO,EAAE,CAAC;IACVC,GAAG,EAAC,CAAC;IACLC,GAAG,EAAC;EACL,CAAC;EACFC,OAAO,EAAE;IAACV,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAI;AACtC,CAAC,EACD;EAAEQ,UAAU,EAAE;AAAK,CAAC,CACrB;AAED,MAAMC,aAAa,GAAG,IAAIf,iBAAQ,CAACC,MAAM,CACvC;EACEM,IAAI,EAAE;IAAEJ,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EACtCU,KAAK,EAAE;IAAEb,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EACvCW,KAAK,EAAE;IAAEd,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACrDY,WAAW,EAAE;IAAEf,IAAI,EAAEC,MAAM;IAAEE,QAAQ,EAAE;EAAK,CAAC;EAC7Ca,YAAY,EAAE;IAAEhB,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EAC1DE,MAAM,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACtDc,UAAU,EAAE;IAAEjB,IAAI,EAAEM,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEJ,QAAQ,EAAE;EAAK,CAAC;EACxDe,OAAO,EAAE,CAACtB,YAAY;AACxB,CAAC,EACD;EAAEe,UAAU,EAAE;AAAK,CAAC,CACrB;AACD,MAAMQ,OAAO,GAAGtB,iBAAQ,CAACuB,KAAK,CAAC,SAAS,EAAER,aAAa,CAAC;AAAC,eAC1CO,OAAO;AAAA"}},"mtime":1670864421640},"{\"assumptions\":{},\"parserOpts\":{\"allowReturnOutsideFunction\":true},\"sourceRoot\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\MERN stack\\\\e-commerce\",\"filename\":\"C:\\\\MERN stack\\\\e-commerce\\\\backend\\\\routers\\\\uploadRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\MERN stack\\\\e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.20.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n});\nconst upload = (0, _multer.default)({\n  storage\n});\nconst uploadRouter = _express.default.Router();\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwic291cmNlUm9vdCI6IkM6XFxNRVJOIHN0YWNrXFxlLWNvbW1lcmNlXFxiYWNrZW5kXFxyb3V0ZXJzXFwiLCJzb3VyY2VzIjpbInVwbG9hZFJvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xyXG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcclxuICBkZXN0aW5hdGlvbihyZXEsIGZpbGUsIGNiKSB7XHJcbiAgICBjYihudWxsLCAndXBsb2Fkcy8nKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgIGNiKG51bGwsIGAke0RhdGUubm93KCl9LmpwZ2ApO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuY29uc3QgdXBsb2FkUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbnVwbG9hZFJvdXRlci5wb3N0KCcvJywgaXNBdXRoLCBpc0FkbWluLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IGltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gIH0pO1xyXG59KTtcclxuZXhwb3J0IGRlZmF1bHQgdXBsb2FkUm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQTJDO0FBRTNDLE1BQU1BLE9BQU8sR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUM7RUFDakNDLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUN6QkEsRUFBRSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUM7RUFDdEIsQ0FBQztFQUNEQyxRQUFRLENBQUNILEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUU7SUFDdEJBLEVBQUUsQ0FBQyxJQUFJLEVBQUcsR0FBRUUsSUFBSSxDQUFDQyxHQUFHLEVBQUcsTUFBSyxDQUFDO0VBQy9CO0FBQ0YsQ0FBQyxDQUFDO0FBRUYsTUFBTUMsTUFBTSxHQUFHLElBQUFULGVBQU0sRUFBQztFQUFFRDtBQUFRLENBQUMsQ0FBQztBQUNsQyxNQUFNVyxZQUFZLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVyQ0YsWUFBWSxDQUFDRyxJQUFJLENBQUMsR0FBRyxFQUFFQyxhQUFNLEVBQUVDLGNBQU8sRUFBRU4sTUFBTSxDQUFDTyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQ2IsR0FBRyxFQUFFYyxHQUFHLEtBQUs7RUFDNUVBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUMsS0FBSyxFQUFHLElBQUdqQixHQUFHLENBQUNDLElBQUksQ0FBQ2lCLElBQUs7RUFBRSxDQUFDLENBQUM7QUFDdEQsQ0FBQyxDQUFDO0FBQUMsZUFDWVgsWUFBWTtBQUFBIn0=","map":{"version":3,"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"sourceRoot":"C:\\MERN stack\\e-commerce\\backend\\routers\\","sources":["uploadRouter.js"],"sourcesContent":["import express from 'express';\r\nimport multer from 'multer';\r\nimport { isAuth, isAdmin } from '../utils';\r\n\r\nconst storage = multer.diskStorage({\r\n  destination(req, file, cb) {\r\n    cb(null, 'uploads/');\r\n  },\r\n  filename(req, file, cb) {\r\n    cb(null, `${Date.now()}.jpg`);\r\n  },\r\n});\r\n\r\nconst upload = multer({ storage });\r\nconst uploadRouter = express.Router();\r\n\r\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\r\n  res.status(201).send({ image: `/${req.file.path}` });\r\n});\r\nexport default uploadRouter;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA2C;AAE3C,MAAMA,OAAO,GAAGC,eAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACzBA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACtB,CAAC;EACDC,QAAQ,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACtBA,EAAE,CAAC,IAAI,EAAG,GAAEE,IAAI,CAACC,GAAG,EAAG,MAAK,CAAC;EAC/B;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAT,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC;AAClC,MAAMW,YAAY,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAErCF,YAAY,CAACG,IAAI,CAAC,GAAG,EAAEC,aAAM,EAAEC,cAAO,EAAEN,MAAM,CAACO,MAAM,CAAC,OAAO,CAAC,EAAE,CAACb,GAAG,EAAEc,GAAG,KAAK;EAC5EA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAI,CAACiB,IAAK;EAAE,CAAC,CAAC;AACtD,CAAC,CAAC;AAAC,eACYX,YAAY;AAAA"}},"mtime":1670505764807}}